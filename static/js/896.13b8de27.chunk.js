(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[896],{4794:function(e,t,n){"use strict";n.r(t),n.d(t,{Form:function(){return ve},ProDrawer:function(){return Y},ProForm:function(){return de},ProTable:function(){return V},Skeleton:function(){return c},useForm:function(){return fe},useTable:function(){return N}});var r=n(7896),o=n(1461),i=n(6976),a=n(8438),l=n(4218),u=["children","style","loading"],c=function(e){var t=e.children,n=e.style,i=e.loading,c=void 0!==i&&i,s=(0,o.Z)(e,u);return(0,l.jsx)(a.Loader,(0,r.Z)({loading:c,style:(0,r.Z)({display:"block"},n),bgColor:"rgba(255, 255, 255, 0.4)"},s,{children:(0,l.jsx)(l.Fragment,{children:t})}))},s=n(2723),d=n(6234),f=n(4795),p=n(7316),v=n(7303),h=n.n(v);var m=n(6387),y=n.n(m),g=["body","headers","requestType"],b={200:"\u670d\u52a1\u5668\u6210\u529f\u8fd4\u56de\u8bf7\u6c42\u7684\u6570\u636e\u3002",201:"\u65b0\u5efa\u6216\u4fee\u6539\u6570\u636e\u6210\u529f\u3002",202:"\u4e00\u4e2a\u8bf7\u6c42\u5df2\u7ecf\u8fdb\u5165\u540e\u53f0\u6392\u961f\uff08\u5f02\u6b65\u4efb\u52a1\uff09\u3002",204:"\u5220\u9664\u6570\u636e\u6210\u529f\u3002",400:"\u53d1\u51fa\u7684\u8bf7\u6c42\u6709\u9519\u8bef\uff0c\u670d\u52a1\u5668\u6ca1\u6709\u8fdb\u884c\u65b0\u5efa\u6216\u4fee\u6539\u6570\u636e\u7684\u64cd\u4f5c\u3002",401:"\u7528\u6237\u6ca1\u6709\u6743\u9650\uff08\u4ee4\u724c\u3001\u7528\u6237\u540d\u3001\u5bc6\u7801\u9519\u8bef\uff09\u3002",403:"\u7528\u6237\u5f97\u5230\u6388\u6743\uff0c\u4f46\u662f\u8bbf\u95ee\u662f\u88ab\u7981\u6b62\u7684\u3002",404:"\u53d1\u51fa\u7684\u8bf7\u6c42\u9488\u5bf9\u7684\u662f\u4e0d\u5b58\u5728\u7684\u8bb0\u5f55\uff0c\u670d\u52a1\u5668\u6ca1\u6709\u8fdb\u884c\u64cd\u4f5c\u3002",406:"\u8bf7\u6c42\u7684\u683c\u5f0f\u4e0d\u53ef\u5f97\u3002",410:"\u8bf7\u6c42\u7684\u8d44\u6e90\u88ab\u6c38\u4e45\u5220\u9664\uff0c\u4e14\u4e0d\u4f1a\u518d\u5f97\u5230\u7684\u3002",422:"\u5f53\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\u65f6\uff0c\u53d1\u751f\u4e00\u4e2a\u9a8c\u8bc1\u9519\u8bef\u3002",500:"\u670d\u52a1\u5668\u53d1\u751f\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u670d\u52a1\u5668\u3002",502:"\u7f51\u5173\u9519\u8bef\u3002",503:"\u670d\u52a1\u4e0d\u53ef\u7528\uff0c\u670d\u52a1\u5668\u6682\u65f6\u8fc7\u8f7d\u6216\u7ef4\u62a4\u3002",504:"\u7f51\u5173\u8d85\u65f6\u3002"};function x(e,t){void 0===t&&(t={});var n=t.method||"GET",i=t,a=i.body,l=i.headers,u=i.requestType,c=void 0===u?"json":u,s=(0,o.Z)(t,g);(null==a?void 0:a.swr_Rest_Time)&&delete a.swr_Rest_Time;var f=(0,r.Z)({},s,{url:e,method:n,data:a});if("json"===c)f.headers=(0,r.Z)({"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},l||{}),f.data=JSON.stringify(a||{});else if("form"===c){var p=new FormData;Object.entries(a||{}).forEach((function(e){var t=(0,d.Z)(e,2),n=t[0],r=t[1];p.append(n,r)})),f.headers=(0,r.Z)({Accept:"application/json"},l||{}),f.data=p}else"urlencoded"===c&&(f.headers=(0,r.Z)({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Accept:"application/json"},l||{}),f.data=y().stringify(a||{},{arrayFormat:"repeat"}));/(GET)/.test(n)&&(f.url=function(e,t){var n=e,r=[];return Object.keys(t).forEach((function(e){return r.push(e+"="+t[e])})),0===Object.keys(t).length?e:(!1===/\?/.test(n)?n=n+"?"+r.join("&"):n+="&"+r.join("&"),n)}(e,(0,r.Z)({},a)),delete f.body);var v=sessionStorage.getItem("token")||localStorage.getItem("token");return v&&(f.headers=(0,r.Z)({},f.headers||{},{token:v})),h().request(f).then((function(e){return e.data})).catch((function(e){var t=e.response;if(t.status>=200&&t.status<300)return t;var n=t.status,r=b[n]||t.statusText,o=new Error(r);if(o.name=t.status,t.data)return t.data;throw o}))}var S=(0,i.createContext)({}),j=function(){return(0,i.useContext)(S)};var Z=["style","columns","rowSelection","onPageChange","scroll","paginationProps"],k=["props"],w=function(e){var t=e.columns,n=e.rowSelection,u=void 0===n?{selectKey:void 0,type:"checkbox",defaultSelected:[]}:n,c=e.onPageChange,v=e.scroll,h=void 0===v?{}:v,m=e.paginationProps,y=void 0===m?{}:m,g=(0,o.Z)(e,Z),b=(0,i.useState)(1),S=(0,d.Z)(b,2),w=S[0],C=S[1],P=(0,i.useState)((null==y?void 0:y.pageSize)||10),O=(0,d.Z)(P,2),E=O[0],F=O[1],I=(0,i.useState)({data:[],total:0}),B=(0,d.Z)(I,2),R=B[0],T=B[1],A=j(),V=A.formatData,N=A.updateStore,D=A.query,M=A.key,q=A.searchValues,H=A.SWRConfiguration,z=void 0===H?{}:H,G=A.requestOptions,Y=u.selectKey,J=u.type,L=void 0===J?"checkbox":J,W=u.defaultSelected,_=void 0===W?[]:W,K=h.x,U="checkbox"===L,Q=function(){return t.map((function(e){return(0,o.Z)(e,k)}))},X=(0,i.useMemo)((function(){var e={};return t.forEach((function(t){var n;if(null!=t&&null!=(n=t.props)&&n.initialValue){var r=t.props.key||t.key;e[r]=t.props.initialValue}Array.isArray(t.props)&&t.props.forEach((function(n){var r=n.key||t.key;n.initialValue&&(e[r]=n.initialValue)}))})),e}),[JSON.stringify(t)]),$=(0,i.useRef)(!1),ee=function(){return D?D(w,E,!1===$.current?X:q):{page:1,pageSize:10}},te=ee().pageSize||10,ne=(0,p.ZP)([M,(0,r.Z)({method:"POST",body:ee()},G)],x,(0,r.Z)({revalidateOnFocus:!1,revalidateOnMount:!1},z)),re=ne.data,oe=ne.isValidating,ie=ne.mutate;(0,i.useEffect)((function(){ie(!1)}),[ie]);var ae=V&&re?V(re).data:(null==re?void 0:re.data)||(null==R?void 0:R.data),le=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=!1);var r=(0,i.useState)(t),o=(0,d.Z)(r,2),a=o[0],l=o[1],u=(0,i.useMemo)((function(){return new Set(a)}),[a]),c=function(e){return u.has(e)},s=function(){e.forEach((function(e){u.delete(e)})),l(Array.from(u))},f=function(e){return n&&s(),u.add(e),l(Array.from(u))},p=function(e){return u.delete(e),l(Array.from(u))},v=function(){e.forEach((function(e){u.add(e)})),l(Array.from(u))},h=(0,i.useMemo)((function(){return e.every((function(e){return!u.has(e)}))}),[e,u]),m=(0,i.useMemo)((function(){return e.every((function(e){return u.has(e)}))&&!h}),[e,u,h]),y=(0,i.useMemo)((function(){return!h&&!m}),[h,m]);return{selected:a,noneSelected:h,allSelected:m,partiallySelected:y,setSelected:l,isSelected:c,select:f,unSelect:p,toggle:function(e){c(e)?p(e):f(e)},selectAll:v,unSelectAll:s,toggleAll:function(){return m?s():v()}}}(Y&&ae?ae.map((function(e){return e[Y]})):[],_,"radio"===L),ue=V&&re?V(re).total:(null==re?void 0:re.total)||(null==R?void 0:R.total),ce=(0,i.useCallback)(function(){var e=(0,f.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c&&c(t),e.next=3,C(t);case 3:ie(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[C,c]);(0,i.useEffect)((function(){var e={};t.forEach((function(t){var n;if(null!=t&&null!=(n=t.props)&&n.initialValue){var r=t.props.key||t.key;e[r]=t.props.initialValue}Array.isArray(t.props)&&t.props.forEach((function(n){var r=n.key||t.key;n.initialValue&&(e[r]=n.initialValue)}))}));var n={data:ae,total:ue,loading:oe,selection:le,pageIndex:w,setPageIndex:C,mutate:ie};$.current||($.current=!0,n.searchValues=e),N(n),re&&T(ae)}),[JSON.stringify(ae),oe,JSON.stringify(t),w,JSON.stringify(le),C,ie,ue]);var se=[{title:U?function(){return(0,l.jsx)(a.Checkbox,{checked:le.allSelected,indeterminate:!le.allSelected&&le.partiallySelected,onClick:function(){le.toggleAll()}})}:null,key:"checked",width:35,render:function(e,t,n){return Y?U?(0,l.jsx)(a.Checkbox,{checked:le.isSelected(n[Y]),onClick:function(){le.toggle(n[Y])}}):(0,l.jsx)(a.Radio,{onChange:function(){le.toggle(n[Y])},checked:le.isSelected(n[Y])}):null}}];return(0,l.jsx)("div",{style:{overflow:K?"scroll":"hidden"},children:(0,l.jsx)("div",{style:{width:K||"100%"},children:(0,l.jsx)(a.Table,(0,r.Z)({columns:Y?se.concat(Q()):Q(),data:ae,empty:(0,l.jsx)(a.Empty,{style:{padding:"40px 0"}}),footer:ae&&ae.length>0&&(0,l.jsx)(a.Pagination,(0,r.Z)({divider:!0},y,{current:w,pageSize:te,total:ue,onChange:function(e){ce(e)},onShowSizeChange:function(e,t){F(t),ce(1),null==y||null==y.onShowSizeChange||y.onShowSizeChange(e,t)}}))},g))})})},C=["option"],P=function(e){var t=e.option,n=(0,o.Z)(e,C);return(0,l.jsxs)(a.Select,(0,r.Z)({},n,{children:[(0,l.jsx)(a.Select.Option,{value:"",children:"\u8bf7\u9009\u62e9"}),t&&t.map((function(e){return(0,l.jsx)(a.Select.Option,{value:e.value,children:e.label},e.value)}))]}))},O=["disabled","option"],E=function(e){var t=e.disabled,n=e.option,u=(0,o.Z)(e,O),c=(0,i.useState)(!1),s=(0,d.Z)(c,2),f=s[0],p=s[1];return(0,i.useEffect)((function(){p(t||!1)}),[t]),(0,l.jsx)(a.RadioGroup,(0,r.Z)({},u,{children:n&&n.map((function(e){return(0,l.jsx)(a.Radio,{disabled:f||(null==e?void 0:e.disabled),value:e.value,children:e.label},e.value)}))}))},F=["option"],I=function(e){var t=e.option,n=(0,o.Z)(e,F);return(0,l.jsx)(a.SearchTree,(0,r.Z)({options:t},n))},B=["widgetProps","key","widget","label","initialValue"],R={input:a.Input,radio:E,checkbox:a.Checkbox,switch:a.Switch,select:P,searchSelect:a.SearchSelect,textarea:a.Textarea,dateInput:a.DateInput,timePicker:a.TimePicker,monthPicker:a.MonthPicker,searchTree:I,dateInputRange:a.DateInputRange},T=function(e){var t=j(),n=(0,i.useRef)(),u=t.updateStore,c=t.updateForm,s=e.columns,d=e.searchBtns,f=e.onBeforeSearch,p=e.formCol,v=void 0===p?5:p,h=function(e,t){var n=e.widgetProps,i=e.widget,a=e.label,u=e.initialValue,c=(0,o.Z)(e,B),s=R[i];return(0,r.Z)({label:a||t,children:(0,l.jsx)(s,(0,r.Z)({},n))},c,{initialValue:u})},m=(0,i.useMemo)((function(){var e={};return function t(n){n.forEach((function(n){if(n.props&&Object.keys(n.props).length>0)if(Array.isArray(n.props))n.props.forEach((function(t){var r=t.key||n.key;e[r]=h(t,n.title)}));else{var r=n.props.key||n.key;e[r]=h(n.props,n.title)}n.children&&n.children.length>0&&t(n.children)}))}(s),e}),[JSON.stringify(s)]),y=function(e){var t=e.initial,n=e.current;u({searchValues:(0,r.Z)({},t,n)})};(0,i.useEffect)((function(){n.current&&c(n)}),[n]);var g=100/v+"%",b=v-1-Object.keys(m).length%v;return(0,l.jsx)(a.Form,{style:{background:"#fff"},className:"uiw-protable-form",resetOnSubmit:!1,onSubmit:function(e){var t=e.initial,n=e.current;f?null!=f&&f({initial:t,current:n})&&y({initial:t,current:n}):y({initial:t,current:n})},onSubmitError:function(e){return e.filed?(0,r.Z)({},e.filed):null},ref:n,fields:m,children:function(e){var t=e.fields,n=void 0===t?{}:t;e.state,e.canSubmit,e.resetForm;return(0,l.jsx)("div",{children:(0,l.jsxs)(a.Row,{gutter:12,children:[Object.keys(n).map((function(e){return(0,l.jsx)(a.Col,{fixed:!0,style:{width:g},children:n[e]},e)})),Array.from({length:b},(function(e,t){return(0,l.jsx)(a.Col,{fixed:!0,style:{width:g}},t.toString())})),(0,l.jsx)(a.Col,{align:"bottom",style:{textAlign:"right",marginBottom:10,marginTop:10},children:d&&d.map((function(e,t){return null!=e&&e.render?(0,l.jsx)(i.Fragment,{children:e.render},t.toString()):(0,l.jsx)(a.Button,(0,r.Z)({style:{marginLeft:5}},e,{children:e.label}),t.toString())}))})]})})}})},A=["table","columns","operateButtons","searchBtns","onBeforeSearch","paginationProps","formCol","tableHeadHidden","tableBackgroundColor"],V=function(e){var t=e.table,n=e.columns,u=e.operateButtons,s=void 0===u?[]:u,d=e.searchBtns,f=e.onBeforeSearch,p=e.paginationProps,v=e.formCol,h=e.tableHeadHidden,m=e.tableBackgroundColor,y=(0,o.Z)(e,A),g=t.key,b=t.onReset,x=t.onRefersh,j=t.updateStore,Z=t.formatData,k=t.query,C=t.searchValues,P=t.loading,O=t.onSearch,E=t.SWRConfiguration,F=t.selection,I=t.pageIndex,B=t.form,R=t.updateForm,V=t.setPageIndex,N=t.mutate,D=t.requestOptions,M=(0,i.useMemo)((function(){return{data:[],onReset:b,onRefersh:x,key:g,updateStore:j,formatData:Z,query:k,searchValues:C,onSearch:O,SWRConfiguration:E,selection:F,pageIndex:I,form:B,updateForm:R,setPageIndex:V,mutate:N,requestOptions:D}}),[JSON.stringify(t)]);return(0,l.jsx)(S.Provider,{value:(0,r.Z)({},M),children:(0,l.jsxs)(c,{loading:P,children:[d&&d.length>0&&(0,l.jsx)(a.Card,{noHover:!0,style:{marginBottom:14},bodyStyle:{padding:"8px 14px"},children:(0,l.jsx)(T,{columns:n,searchBtns:d,onBeforeSearch:f,formCol:v})}),(0,l.jsxs)(a.Card,{noHover:!0,children:[s&&s.length>0&&(0,l.jsx)("div",{style:{background:"#fff",paddingBottom:14},children:s.map((function(e,t){return null!=e&&e.render?(0,l.jsx)(i.Fragment,{children:e.render},t.toString()):(0,l.jsx)(a.Button,(0,r.Z)({},e,{children:e.label}),t.toString())}))}),(0,l.jsx)("div",{className:["uiw-admin-protable",h?"is-need-table-header":"",m?"table-parent-uiw-admin":""].filter((function(e){return e})).join(" "),style:{backgroundColor:m},children:(0,l.jsx)(w,(0,r.Z)({columns:n},y,{paginationProps:p}))})]})]})})},N=function(e,t){void 0===t&&(t={});var n=t,o=n.formatData,a=n.query,l=n.SWRConfiguration,u=n.requestOptions,c=(0,i.useState)(),p=(0,d.Z)(c,2),v=p[0],h=p[1],m=(0,i.useState)({pageIndex:1,total:1,data:[],searchValues:{},loading:!1,setPageIndex:function(){return null},mutate:function(){return null},selection:{selected:[],noneSelected:!1,allSelected:!1,partiallySelected:!1,setSelected:function(){return null},isSelected:function(){return null},select:function(){return null},unSelect:function(){return null},toggle:function(){return null},selectAll:function(){return null},unSelectAll:function(){return null},toggleAll:function(){return null}}}),y=(0,d.Z)(m,2),g=y[0],b=y[1],x=function(){var e=(0,f.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==v?void 0:v.current.resetForm();case 2:j();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,f.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.mutate(!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,f.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=10;break}return e.next=3,v.current.onSubmit();case 3:if(t=v.current.getError(),0!==Object.keys(t).length){e.next=8;break}return e.next=7,g.setPageIndex(1);case 7:g.mutate(!1);case 8:e.next=13;break;case 10:return e.next=12,g.setPageIndex(1);case 12:g.mutate(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.Z)({key:e,onReset:x,onRefersh:S,onSearch:j,formatData:o,query:a,updateStore:function(e){b((0,r.Z)({},g,e))},SWRConfiguration:l,form:v,requestOptions:u,updateForm:function(e){h(e)}},g)},D=function(e){var t=e.path,n=e.disabled,r=e.children,o=i.useMemo((function(){return!0}),[t]);return o?r:!o&&n&&i.isValidElement(r)?i.cloneElement(r,{disabled:n}):(0,l.jsx)(i.Fragment,{})},M=["path","children"],q=["visible","title","onClose","width","buttons","children"],H=["label","show","path","disabled"];function z(e){var t=e.path,n=e.children,i=(0,o.Z)(e,M);return t?(0,l.jsx)(D,(0,r.Z)({path:t},i,{children:n})):(0,l.jsx)(l.Fragment,{children:n})}function G(e){var t=e.visible,n=e.title,i=void 0===n?"":n,u=e.onClose,c=void 0===u?null:u,s=e.width,d=void 0===s?800:s,f=e.buttons,p=void 0===f?[]:f,v=e.children,h=(0,o.Z)(e,q);return(0,l.jsx)(a.Drawer,(0,r.Z)({title:i,isOpen:t,onClose:c&&c,size:d,bodyStyle:{padding:"0 10px 45px 10px"},footer:p.map((function(e,t){var n=e.label,i=void 0===n?"":n,u=e.show,c=void 0===u||u,s=e.path,d=e.disabled,f=void 0!==d&&d,p=(0,o.Z)(e,H);return c&&(0,l.jsx)(z,{path:s,children:(0,l.jsx)(a.Button,(0,r.Z)({disabled:f},p,{children:i}))},t)}))},h,{children:v}))}var Y=(0,i.memo)(G),J=(0,i.createContext)({}),L=(0,i.createContext)({}),W=n(1361),_=["uploadType","value","readonly","maxNumber"],K=function(e){var t=e.uploadType,n=e.value,u=e.readonly,c=void 0!==u&&u,s=e.maxNumber,f=(0,o.Z)(e,_),p=i.useState(!1),v=(0,d.Z)(p,2),h=v[0],m=v[1],y=i.useState(""),g=(0,d.Z)(y,2),b=g[0],x=g[1];return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(a.FileInput,(0,r.Z)({uploadType:t,readonly:c,value:n,maxNumber:s,onPreview:function(e){x(null==e?void 0:e.dataURL),m(!0)}},f,{children:c?null:"card"===t?(0,l.jsx)(a.Icon,{type:"plus"}):"picture"===t||"text"===t?(0,l.jsx)(a.Button,{type:"primary",children:"\u65b0\u589e"}):null})),(0,l.jsx)(a.Modal,{isOpen:h,onClosed:function(){return m(!1)},width:600,confirmButtonProps:{style:{display:"none"}},children:(0,l.jsx)("img",{crossOrigin:"anonymous",src:b,alt:"",style:{width:"100%",height:"100%"}})})]})};function U(e,t,n,o){var u="";if("radio"===e||"searchSelect"===e&&"multiple"!==(null==o?void 0:o.mode)||"select"===e){var c=n.filter((function(e){return e.value===t}))||[];c.length>0&&(u=c[0].label)}else if("checkbox"===e){var s,d=(0,W.Z)(n);try{for(d.s();!(s=d.n()).done;){var f=s.value;t.includes(f.value)&&(u+=""+f.label)}}catch(y){d.e(y)}finally{d.f()}}else if("switch"===e)u=t?"\u662f":"\u5426";else if("timePicker"===e)u=t&&(0,a.formatter)("HH:mm:ss",new Date(t));else if("monthPicker"===e)u=t&&(0,a.formatter)("YYYY-MM",new Date(t));else if("dateInput"===e)u=t&&(0,a.formatter)((null==o?void 0:o.format)||"YYYY-MM-DD",new Date(t));else if("upload"===e){var p=(0,r.Z)({value:t,uploadType:null==o?void 0:o.uploadType,readonly:!0,showFileIcon:{showPreviewIcon:!0,showRemoveIcon:!1}},o);u=(0,l.jsx)(K,(0,r.Z)({},p))}else if("selectMultiple"===e){u=(t&&t.length>0&&t.map((function(e){return e.label}))||[]).join(";")}else if("searchSelect"===e&&"multiple"===(null==o?void 0:o.mode)){var v,h=(0,W.Z)(n);try{for(h.s();!(v=h.n()).done;){var m=v.value;t.includes(m.value)&&(u+=""+m.label)}}catch(y){h.e(y)}finally{h.f()}}else u="rate"===e?(0,l.jsx)(a.Rate,{value:t,readOnly:!0}):"string"===typeof t||"number"===typeof t||i.isValidElement(t)?t:"";return"searchTree"===e&&(u=null==t||null==t.map?void 0:t.map((function(e,n){return n===t.length-1?e.label:e.label+", "}))),u}function Q(e){return"string"===typeof e||"number"===typeof e}function X(e){for(var t in e)return!1;return!0}var $=function(e){void 0===e&&(e=[]);var t={};return e.forEach((function(e){var n=e.rules,r=e.key,o=e.value;e.required&&(!o||Array.isArray(o)&&0===o.length)&&(t[r]=function(e){return["input","textarea"].includes(e)?"\u8bf7\u586b\u5199\u5b57\u6bb5":"\u8bf7\u9009\u62e9\u5b57\u6bb5"}(r)),n&&n.length>0&&n.forEach((function(e){var n,i=e.validator,a=void 0===i?null:i,l=e.message,u=void 0===l?"":l,c=e.required,s=e.pattern,d=void 0===s?null:s;if(!c||(n=o,"[object Object]"!=Object.prototype.toString.call(n))||!X(o)&&o)if(!c||!function(e){return"[object Array]"==Object.prototype.toString.call(e)}(o)||0!==o.length&&o)if(!c||void 0!==o&&null!==o)if(c&&Q(o)&&!o)t[r]=u;else if(a){var f=a(o);f?f&&"string"===typeof f&&(t[r]=f):t[r]=u}else Q(o)&&d&&!d.test(o)&&(t[r]=u);else t[r]=u;else t[r]=u;else t[r]=u}))})),t},ee=function(e){if(void 0===e&&(e=[]),0===e.length)return!1;var t=e.filter((function(e){return e.required||!1}));return!!(t&&t.length>0)};var te=function(e){var t=e.formDatas,n=void 0===t?[]:t,o=e.formfields,u=e.formType,c=e.onSubmit,s=e.onChange,d=e.onSubmitError,f=e.buttonsContainer,p=e.showSaveButton,v=void 0!==p&&p,h=e.showResetButton,m=void 0!==h&&h,y=e.saveButtonProps,g=void 0===y?{}:y,b=e.resetButtonProps,x=void 0===b?{}:b,S=e.formInstanceRef,j=e.className,Z=e.style,k=(0,i.useRef)(null),w=(0,i.useContext)(J),C=(0,i.useContext)(L);console.log(8888,u);var P=w.setFormState;(0,i.useEffect)((function(){return null==P?void 0:P(k)}),[k]),(0,i.useEffect)((function(){k&&k.current&&(S.current=k)}),[k]);var O=(0,r.Z)({paddingBottom:10},Z);return"pure"!==u&&(O.background="#fff"),(0,l.jsx)(a.Form,{className:j,ref:k,style:O,resetOnSubmit:!1,onSubmit:function(e){var t=e.initial,r=e.current,o=n.filter((function(e){return!0!==e.hide})).map((function(e){return{key:e.key,value:r[e.key],rules:e.rules,required:e.required}}))||[],i=$(o);if(Object.keys(i).length>0){var a=new Error;throw a.filed=i,a}null==c||c(t,r)},onChange:function(e){var t=e.initial,n=e.current;return null==s?void 0:s(t,n)},onSubmitError:function(e){if(!d)return e.filed?(0,r.Z)({},e.filed):null;null==d||d(e)},fields:o,children:function(e){var t=e.fields,n=void 0===t?{}:t,o=(e.state,e.canSubmit),u=void 0===o?function(){return!1}:o,c=e.resetForm;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(a.Row,{gutter:10,children:Object.keys(n).map((function(e){var t,o,l,u,c=(null==(t=n[e])||null==(o=t.props)?void 0:o.span)||C&&C.span||"8",s=(null==(l=n[e])||null==(u=l.props)?void 0:u.colstyle)||{};return(0,i.createElement)(a.Col,(0,r.Z)({},C,{style:(0,r.Z)({},C&&C.style||{},s),key:e,span:c}),n[e])}))}),(0,l.jsxs)("div",{className:"w-form-item-center",style:(0,r.Z)({},f),children:[(0,l.jsx)(a.Button,(0,r.Z)({className:"uiw-admin-proform-btn",style:{display:v?"flex":"none"},disabled:!u(),type:"primary",htmlType:"submit"},g,{children:g.label||"\u63d0\u4ea4"})),(0,l.jsx)(a.Button,(0,r.Z)({className:"uiw-admin-proform-btn",style:{display:m?"flex":"none"},onClick:c},x,{children:x.label||"\u91cd\u7f6e"}))]})]})}})},ne=function(e){var t=e.title,n=e.formDatas,o=e.readOnlyProps,i=e.className,u=e.layout,c=e.style;return(0,l.jsx)(a.Descriptions,(0,r.Z)({bordered:!0,title:t,layout:u},o,{className:i,style:(0,r.Z)({width:"100%"},c),children:null==n?void 0:n.map((function(e,t){var n=e.hide,r=e.label,o=e.widget,i=e.initialValue,u=void 0===i?"":i,c=e.option,s=void 0===c?[]:c,d=e.readSpan,f=void 0===d?1:d,p=e.widgetProps,v=void 0===p?{}:p;return n?null:(0,l.jsx)(a.Descriptions.Item,{span:f,label:r,children:U(o,u,s,v)},t)}))}))},re=["option"],oe=function(e){var t=e.option,n=(0,o.Z)(e,re);return(0,l.jsx)(a.Checkbox.Group,(0,r.Z)({},n,{children:t&&t.map((function(e){return(0,l.jsx)(a.Checkbox,{value:e.value,children:e.label},e.value)}))}))},ie=n(8079);var ae=function(e){var t=e.option,n=void 0===t?[]:t,r=e.onChange,o=e.onSelect,u=e.onSearch,c=e.onBlur,s=e.onClear,f=e.value,p=void 0===f?[]:f,v=e.loading,h=void 0===v||v,m=e.disabled,y=void 0!==m&&m,g=e.placeholder,b=void 0===g?"\u8bf7\u9009\u62e9":g,x=e.allowClear,S=void 0!==x&&x,j=e.noContent,Z=e.showSearch,k=void 0!==Z&&Z,w=e.maxCount,C=void 0===w?3:w,P=(0,i.useState)(p),O=(0,d.Z)(P,2),E=O[0],F=O[1],I=(0,i.useState)(""),B=(0,d.Z)(I,2),R=B[0],T=B[1],A=(0,i.useState)(!1),V=(0,d.Z)(A,2),N=V[0],D=V[1],M=E.length===C,q=function(e,t){var n=t.target;"search"===e&&(D(!0),T(n.value),null==u||u(n.value)),"blur"===e&&(T(""),D(!1),null==c||c()),"clean"===e&&(T(""),F([]),D(!1),null==s||s([]))},H=i.useMemo((function(){var e=E&&E.length>0&&E.map((function(e){return e.label}))||[];return N?R:e.join(";")}),[E,R,N]);function z(){return!N&&S&&E.length>0?"close":N&&h?"loading":"search"}return(0,l.jsx)(a.Popover,{trigger:"focus",placement:"bottomLeft",content:n&&n.length>0?(0,l.jsx)(a.Menu,{style:{minHeight:25,maxHeight:150,overflowY:"scroll",width:200},children:n.map((function(e,t){var i=E&&-1!==E.findIndex((function(t){return t.value===e.value}));return(0,l.jsx)(a.Menu.Item,{style:{marginBottom:n.length-1===t?0:5},active:i,text:e.label,disabled:e.disabled,onClick:function(t){D(!1),t.preventDefault(),function(e){var t=(0,ie.Z)(E);t.find((function(t){return t.value===e.value}))||M?t=t.filter((function(t){return t.value!==e.value})):t.push(e),F(t),null==r||r(t),null==o||o(e)}(e)}},e.value)}))}):j||(0,l.jsx)(a.Loader,{loading:h,color:"black",children:(0,l.jsxs)("div",{style:{padding:10,height:70,width:200,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontSize:12,color:"#888"},children:[(0,l.jsx)(a.Icon,{type:"file-unknown",style:{fontSize:20}}),"\u6682\u65e0\u6570\u636e"]})}),visibleArrow:!1,children:(0,l.jsx)(a.Input,{readOnly:!k,disabled:y,placeholder:b,value:H,onChange:function(e){return q("search",e)},onBlur:function(e){return q("blur",e)},addonAfter:(0,l.jsx)(a.Icon,{type:z(),spin:h,onClick:"close"===z()?q.bind(this,"clean"):void 0})})})},le=["option"],ue=function(e){var t=e.option,n=(0,o.Z)(e,le);return(0,l.jsx)(a.SearchTree,(0,r.Z)({options:t},n))},ce=["hide","widgetProps","key","widget","label","initialValue","required"];function se(e,t){var n,u=e.formDatas,c=void 0===u?[]:u,d=e.title,p=void 0===d?"":d,v=e.formType,h=void 0===v?"card":v,m=e.layout,y=void 0===m?"vertical":m,g=e.readOnly,b=void 0!==g&&g,x=e.customWidgetsList,S=void 0===x?{}:x,j=e.form,Z=e.cardProps,k=void 0===Z?{}:Z,w=e.collapseProps,C=void 0===w?{}:w,O=e.collapsePanelProps,F=void 0===O?{}:O,I=e.colProps,B=(0,i.useMemo)((function(){return function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={});var i=(0,r.Z)({input:a.Input,inputNumber:a.InputNumber,radio:E,checkbox:oe,switch:a.Switch,select:P,searchSelect:a.SearchSelect,selectMultiple:ae,textarea:a.Textarea,dateInput:a.DateInput,timePicker:a.TimePicker,monthPicker:a.MonthPicker,upload:K,rate:a.Rate,searchTree:ue},n),u={};return t.forEach((function(t){if(e||delete t.readSpan,t){var n=t.hide,a=void 0!==n&&n,c=t.widgetProps,s=t.key,d=t.widget,f=t.label,p=t.initialValue,v=(0,o.Z)(t,ce);if(!a){var h=s,m=i[d],y=ee((null==v?void 0:v.rules)||[]);u[h]=(0,r.Z)({label:y?(0,l.jsx)("span",{className:"w-proform-label",children:f}):f,children:(0,l.jsx)(m,(0,r.Z)({},c))},v,{initialValue:p})}}})),u}(b,c,S)}),[c]),R=(j||{}).setFormState,T=(0,i.useMemo)((function(){return{setFormState:R}}),[j]),A=(0,i.useRef)();(0,i.useImperativeHandle)(t,(function(){var e,t=function(){var e,t;return(null==A||null==(e=A.current)||null==(t=e.current)?void 0:t.onSubmit())||null},n=function(){var e,t;return(null==A||null==(e=A.current)||null==(t=e.current)?void 0:t.getFieldValues())||{}},o=function(){var e,t;return(null==A||null==(e=A.current)||null==(t=e.current)?void 0:t.getError())||{}};return(0,r.Z)({},null==(e=A.current)?void 0:e.current,{getError:o,getFieldValues:n,submitvalidate:t,validateFieldsAndGetValue:function(){return new Promise(function(){var e=(0,f.Z)((0,s.Z)().mark((function e(r,i){var a,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return e.next=4,o();case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:if(!X(a=e.t0)){e.next=18;break}return e.next=11,n();case 11:if(e.t1=e.sent,e.t1){e.next=14;break}e.t1={};case 14:l=e.t1,r(l),e.next=19;break;case 18:i(a);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}})}));var V=(0,r.Z)({},e,{layout:y,formfields:B,formInstanceRef:A}),N=b?void 0:p,D=b?(0,l.jsx)(ne,(0,r.Z)({},e)):(0,l.jsx)(te,(0,r.Z)({},V));return n="card"===h?(0,l.jsx)(a.Card,(0,r.Z)({title:N},k,{children:D})):"collapse"===h?(0,l.jsx)(a.Collapse,(0,r.Z)({activeKey:"1"},C,{children:(0,l.jsx)(a.Collapse.Panel,(0,r.Z)({header:p},F,{children:D}),"1")})):D,(0,l.jsx)(J.Provider,{value:T,children:(0,l.jsx)(L.Provider,{value:I||{},children:(0,l.jsx)("div",{className:"uiw-admin-proform uiw-admin-proform-"+y,children:n})})})}var de=(0,i.forwardRef)(se),fe=function(){var e=(0,i.useState)(),t=(0,d.Z)(e,2),n=t[0],o=t[1],a=function(){var e;return(null==n||null==(e=n.current)?void 0:e.onSubmit())||null},l=function(){var e;return(null==n||null==(e=n.current)?void 0:e.getFieldValues())||{}},u=function(){var e;return(null==n||null==(e=n.current)?void 0:e.getError())||{}};return(0,r.Z)({},null==n?void 0:n.current,{submitvalidate:a,getError:u,getFieldValues:l,validateFieldsAndGetValue:function(){return new Promise(function(){var e=(0,f.Z)((0,s.Z)().mark((function e(t,n){var r,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:X(r=u())?(o=l(),t(o)):n(r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},setFormState:o})},pe=function(e,t){var n={};return Object.entries(t).forEach((function(t){var r=(0,d.Z)(t,2),o=r[0],i=r[1];if(i){var a=e[o],l=i.map((function(e){if("function"===typeof e)return e(a);if(e&&"object"===typeof e){if(e.required&&!function(e){return"number"===typeof e||("string"===typeof e?!!e:Array.isArray(e)?!!e.length:"function"===typeof e||"boolean"===typeof e||("[object Object]"===Object.prototype.toString.call(e)?!!Object.keys(e).length:!!e))}(a))return e.message;if(e.pattern instanceof RegExp)return e.pattern.test(a)}return!1})).filter(Boolean);l.length&&(n[o]=l)}})),n};var ve=function(e){var t=e.fields,n=e.buttonGroup,o=e.buttonGroupClassName,u=e.buttonGroupStyle,c=e.showSaveButton,s=void 0!==c&&c,f=e.showResetButton,p=void 0!==f&&f,v=e.saveButtonProps,h=void 0===v?{}:v,m=e.resetButtonProps,y=void 0===m?{}:m,g=n||[(0,r.Z)({style:{display:s?"flex":"none"},htmlType:"submit",children:h.label||"\u63d0\u4ea4"},h),(0,r.Z)({style:{display:p?"flex":"none"},children:y.label||"\u91cd\u7f6e",htmlType:"reset"},y)];return(0,l.jsx)(a.Form,{onChange:function(t){return null==e.onChange?void 0:e.onChange(t)},onSubmitError:function(t){if(!e.onSubmitError)return t.filed?(0,r.Z)({},t.filed):null;e.onSubmitError(t)},fields:t,onSubmit:function(n,r){var o=n.initial,i=n.current;if(e.onSubmit)e.onSubmit({initial:o,current:i},r);else{var a=pe(i,function(e){var t={};return Object.entries(e||{}).map((function(e){var n=(0,d.Z)(e,2),r=n[0],o=n[1];o.rules&&(t[r]=o.rules)})),t}(t));if(Object.keys(a).length){var l=new Error;throw l.filed=a,l}}},children:function(n){var c=n.fields,s=n.canSubmit,d=n.resetForm;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(a.Row,{gutter:10,children:c&&Object.keys(c).map((function(n){var o=(0,r.Z)({},e.colProps||{});return t&&(o=(0,r.Z)({},o,t[n].colProps||{})),(0,l.jsx)(a.Col,(0,r.Z)({span:8},o,{children:c[n]}),n)}))}),(0,l.jsx)("div",{className:"w-form-item-center "+o,style:u,children:g.map((function(e,t){if("function"===typeof e)return e(n);var o=(0,r.Z)({},e);return"submit"===e.htmlType?o.disabled=!(null!=s&&s()):"reset"===e.htmlType&&(o.onClick=d),(0,l.jsx)(a.Button,(0,r.Z)({},o),t)}))})]})}})}},3260:function(){}}]);
//# sourceMappingURL=896.13b8de27.chunk.js.map