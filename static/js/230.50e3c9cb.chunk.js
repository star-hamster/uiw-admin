(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[230],{759:function(e,t,n){"use strict";n.r(t),n.d(t,{Form:function(){return ue},ProDrawer:function(){return M},ProForm:function(){return ie},ProTable:function(){return F},Skeleton:function(){return c},useForm:function(){return le},useTable:function(){return I}});var r=n(7896),o=n(1461),i=n(6976),l=n(8438),a=n(4218),u=["children","style","loading"],c=function(e){var t=e.children,n=e.style,i=e.loading,c=void 0!==i&&i,s=(0,o.Z)(e,u);return(0,a.jsx)(l.Loader,(0,r.Z)({loading:c,style:(0,r.Z)({display:"block"},n),bgColor:"rgba(255, 255, 255, 0.4)"},s,{children:(0,a.jsx)(a.Fragment,{children:t})}))},s=n(2723),d=n(6234),f=n(4795),p=n(5855),v=n(5386),h=(0,i.createContext)({}),m=function(){return(0,i.useContext)(h)};var g=["style","columns","rowSelection","onPageChange","scroll","paginationProps"],y=["props"],b=function(e){var t=e.columns,n=e.rowSelection,u=void 0===n?{selectKey:void 0,type:"checkbox",defaultSelected:[]}:n,c=e.onPageChange,h=e.scroll,b=void 0===h?{}:h,x=e.paginationProps,S=void 0===x?{}:x,j=(0,o.Z)(e,g),Z=(0,i.useState)(1),k=(0,d.Z)(Z,2),w=k[0],C=k[1],P=(0,i.useState)((null==S?void 0:S.pageSize)||10),O=(0,d.Z)(P,2),E=O[0],F=O[1],I=(0,i.useState)({data:[],total:0}),B=(0,d.Z)(I,2),R=B[0],T=B[1],A=m(),V=A.formatData,D=A.updateStore,M=A.query,N=A.key,q=A.searchValues,H=A.SWRConfiguration,Y=void 0===H?{}:H,z=A.requestOptions,G=u.selectKey,W=u.type,J=void 0===W?"checkbox":W,L=u.defaultSelected,_=void 0===L?[]:L,K=b.x,U="checkbox"===J,Q=function(){return t.map((function(e){return(0,o.Z)(e,y)}))},X=(0,i.useMemo)((function(){var e={};return t.forEach((function(t){var n;if(null!=t&&null!=(n=t.props)&&n.initialValue){var r=t.props.key||t.key;e[r]=t.props.initialValue}Array.isArray(t.props)&&t.props.forEach((function(n){var r=n.key||t.key;n.initialValue&&(e[r]=n.initialValue)}))})),e}),[JSON.stringify(t)]),$=(0,i.useRef)(!1),ee=function(){return M?M(w,E,!1===$.current?X:q):{page:1,pageSize:10}},te=ee().pageSize||10,ne=(0,p.ZP)([N,(0,r.Z)({method:"POST",body:ee()},z)],v.WY,(0,r.Z)({revalidateOnFocus:!1,revalidateOnMount:!1},Y)),re=ne.data,oe=ne.isValidating,ie=ne.mutate;(0,i.useEffect)((function(){ie(!1)}),[ie]);var le=V&&re?V(re).data:(null==re?void 0:re.data)||(null==R?void 0:R.data),ae=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=!1);var r=(0,i.useState)(t),o=(0,d.Z)(r,2),l=o[0],a=o[1],u=(0,i.useMemo)((function(){return new Set(l)}),[l]),c=function(e){return u.has(e)},s=function(){e.forEach((function(e){u.delete(e)})),a(Array.from(u))},f=function(e){return n&&s(),u.add(e),a(Array.from(u))},p=function(e){return u.delete(e),a(Array.from(u))},v=function(){e.forEach((function(e){u.add(e)})),a(Array.from(u))},h=(0,i.useMemo)((function(){return e.every((function(e){return!u.has(e)}))}),[e,u]),m=(0,i.useMemo)((function(){return e.every((function(e){return u.has(e)}))&&!h}),[e,u,h]),g=(0,i.useMemo)((function(){return!h&&!m}),[h,m]);return{selected:l,noneSelected:h,allSelected:m,partiallySelected:g,setSelected:a,isSelected:c,select:f,unSelect:p,toggle:function(e){c(e)?p(e):f(e)},selectAll:v,unSelectAll:s,toggleAll:function(){return m?s():v()}}}(G&&le?le.map((function(e){return e[G]})):[],_,"radio"===J),ue=V&&re?V(re).total:(null==re?void 0:re.total)||(null==R?void 0:R.total),ce=(0,i.useCallback)(function(){var e=(0,f.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c&&c(t),e.next=3,C(t);case 3:ie(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[C,c]);(0,i.useEffect)((function(){var e={};t.forEach((function(t){var n;if(null!=t&&null!=(n=t.props)&&n.initialValue){var r=t.props.key||t.key;e[r]=t.props.initialValue}Array.isArray(t.props)&&t.props.forEach((function(n){var r=n.key||t.key;n.initialValue&&(e[r]=n.initialValue)}))}));var n={data:le,total:ue,loading:oe,selection:ae,pageIndex:w,setPageIndex:C,mutate:ie};$.current||($.current=!0,n.searchValues=e),D(n),re&&T(le)}),[JSON.stringify(le),oe,JSON.stringify(t),w,JSON.stringify(ae),C,ie,ue]);var se=[{title:U?function(){return(0,a.jsx)(l.Checkbox,{checked:ae.allSelected,indeterminate:!ae.allSelected&&ae.partiallySelected,onClick:function(){ae.toggleAll()}})}:null,key:"checked",width:35,render:function(e,t,n){return G?U?(0,a.jsx)(l.Checkbox,{checked:ae.isSelected(n[G]),onClick:function(){ae.toggle(n[G])}}):(0,a.jsx)(l.Radio,{onChange:function(){ae.toggle(n[G])},checked:ae.isSelected(n[G])}):null}}];return(0,a.jsx)("div",{style:{overflow:K?"scroll":"hidden"},children:(0,a.jsx)("div",{style:{width:K||"100%"},children:(0,a.jsx)(l.Table,(0,r.Z)({columns:G?se.concat(Q()):Q(),data:le,empty:(0,a.jsx)(l.Empty,{style:{padding:"40px 0"}}),footer:le&&le.length>0&&(0,a.jsx)(l.Pagination,(0,r.Z)({divider:!0},S,{current:w,pageSize:te,total:ue,onChange:function(e){ce(e)},onShowSizeChange:function(e,t){F(t),ce(1),null==S||null==S.onShowSizeChange||S.onShowSizeChange(e,t)}}))},j))})})},x=["option"],S=function(e){var t=e.option,n=(0,o.Z)(e,x);return(0,a.jsxs)(l.Select,(0,r.Z)({},n,{children:[(0,a.jsx)(l.Select.Option,{value:"",children:"\u8bf7\u9009\u62e9"}),t&&t.map((function(e){return(0,a.jsx)(l.Select.Option,{value:e.value,children:e.label},e.value)}))]}))},j=["disabled","option"],Z=function(e){var t=e.disabled,n=e.option,u=(0,o.Z)(e,j),c=(0,i.useState)(!1),s=(0,d.Z)(c,2),f=s[0],p=s[1];return(0,i.useEffect)((function(){p(t||!1)}),[t]),(0,a.jsx)(l.RadioGroup,(0,r.Z)({},u,{children:n&&n.map((function(e){return(0,a.jsx)(l.Radio,{disabled:f||(null==e?void 0:e.disabled),value:e.value,children:e.label},e.value)}))}))},k=["option"],w=function(e){var t=e.option,n=(0,o.Z)(e,k);return(0,a.jsx)(l.SearchTree,(0,r.Z)({options:t},n))},C=["widgetProps","key","widget","label","initialValue"],P={input:l.Input,radio:Z,checkbox:l.Checkbox,switch:l.Switch,select:S,searchSelect:l.SearchSelect,textarea:l.Textarea,dateInput:l.DateInput,timePicker:l.TimePicker,monthPicker:l.MonthPicker,searchTree:w,dateInputRange:l.DateInputRange},O=function(e){var t=m(),n=(0,i.useRef)(),u=t.updateStore,c=t.updateForm,s=e.columns,d=e.searchBtns,f=e.onBeforeSearch,p=e.formCol,v=void 0===p?5:p,h=function(e,t){var n=e.widgetProps,i=e.widget,l=e.label,u=e.initialValue,c=(0,o.Z)(e,C),s=P[i];return(0,r.Z)({label:l||t,children:(0,a.jsx)(s,(0,r.Z)({},n))},c,{initialValue:u})},g=(0,i.useMemo)((function(){var e={};return function t(n){n.forEach((function(n){if(n.props&&Object.keys(n.props).length>0)if(Array.isArray(n.props))n.props.forEach((function(t){var r=t.key||n.key;e[r]=h(t,n.title)}));else{var r=n.props.key||n.key;e[r]=h(n.props,n.title)}n.children&&n.children.length>0&&t(n.children)}))}(s),e}),[JSON.stringify(s)]),y=function(e){var t=e.initial,n=e.current;u({searchValues:(0,r.Z)({},t,n)})};(0,i.useEffect)((function(){n.current&&c(n)}),[n]);var b=100/v+"%",x=v-1-Object.keys(g).length%v;return(0,a.jsx)(l.Form,{style:{background:"#fff"},className:"uiw-protable-form",resetOnSubmit:!1,onSubmit:function(e){var t=e.initial,n=e.current;f?null!=f&&f({initial:t,current:n})&&y({initial:t,current:n}):y({initial:t,current:n})},onSubmitError:function(e){return e.filed?(0,r.Z)({},e.filed):null},ref:n,fields:g,children:function(e){var t=e.fields,n=void 0===t?{}:t;e.state,e.canSubmit,e.resetForm;return(0,a.jsx)("div",{children:(0,a.jsxs)(l.Row,{gutter:12,children:[Object.keys(n).map((function(e){return(0,a.jsx)(l.Col,{fixed:!0,style:{width:b},children:n[e]},e)})),Array.from({length:x},(function(e,t){return(0,a.jsx)(l.Col,{fixed:!0,style:{width:b}},t.toString())})),(0,a.jsx)(l.Col,{align:"bottom",style:{textAlign:"right",marginBottom:10,marginTop:10},children:d&&d.map((function(e,t){return null!=e&&e.render?(0,a.jsx)(i.Fragment,{children:e.render},t.toString()):(0,a.jsx)(l.Button,(0,r.Z)({style:{marginLeft:5}},e,{children:e.label}),t.toString())}))})]})})}})},E=["table","columns","operateButtons","searchBtns","onBeforeSearch","paginationProps","formCol","tableHeadHidden","tableBackgroundColor"],F=function(e){var t=e.table,n=e.columns,u=e.operateButtons,s=void 0===u?[]:u,d=e.searchBtns,f=e.onBeforeSearch,p=e.paginationProps,v=e.formCol,m=e.tableHeadHidden,g=e.tableBackgroundColor,y=(0,o.Z)(e,E),x=t.key,S=t.onReset,j=t.onRefersh,Z=t.updateStore,k=t.formatData,w=t.query,C=t.searchValues,P=t.loading,F=t.onSearch,I=t.SWRConfiguration,B=t.selection,R=t.pageIndex,T=t.form,A=t.updateForm,V=t.setPageIndex,D=t.mutate,M=t.requestOptions,N=(0,i.useMemo)((function(){return{data:[],onReset:S,onRefersh:j,key:x,updateStore:Z,formatData:k,query:w,searchValues:C,onSearch:F,SWRConfiguration:I,selection:B,pageIndex:R,form:T,updateForm:A,setPageIndex:V,mutate:D,requestOptions:M}}),[JSON.stringify(t)]);return(0,a.jsx)(h.Provider,{value:(0,r.Z)({},N),children:(0,a.jsxs)(c,{loading:P,children:[d&&d.length>0&&(0,a.jsx)(l.Card,{noHover:!0,style:{marginBottom:14},bodyStyle:{padding:"8px 14px"},children:(0,a.jsx)(O,{columns:n,searchBtns:d,onBeforeSearch:f,formCol:v})}),(0,a.jsxs)(l.Card,{noHover:!0,bodyStyle:{paddingTop:5},children:[s&&s.length>0&&(0,a.jsx)("div",{style:{background:"#fff",padding:"10px 0"},children:s.map((function(e,t){return null!=e&&e.render?(0,a.jsx)(i.Fragment,{children:e.render},t.toString()):(0,a.jsx)(l.Button,(0,r.Z)({},e,{children:e.label}),t.toString())}))}),(0,a.jsx)("div",{className:["uiw-admin-protable",m?"is-need-table-header":"",g?"table-parent-uiw-admin":""].filter((function(e){return e})).join(" "),style:{backgroundColor:g},children:(0,a.jsx)(b,(0,r.Z)({columns:n},y,{paginationProps:p}))})]})]})})},I=function(e,t){void 0===t&&(t={});var n=t,o=n.formatData,l=n.query,a=n.SWRConfiguration,u=n.requestOptions,c=(0,i.useState)(),p=(0,d.Z)(c,2),v=p[0],h=p[1],m=(0,i.useState)({pageIndex:1,total:1,data:[],searchValues:{},loading:!1,setPageIndex:function(){return null},mutate:function(){return null},selection:{selected:[],noneSelected:!1,allSelected:!1,partiallySelected:!1,setSelected:function(){return null},isSelected:function(){return null},select:function(){return null},unSelect:function(){return null},toggle:function(){return null},selectAll:function(){return null},unSelectAll:function(){return null},toggleAll:function(){return null}}}),g=(0,d.Z)(m,2),y=g[0],b=g[1],x=function(){var e=(0,f.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==v?void 0:v.current.resetForm();case 2:j();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,f.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.mutate(!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,f.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=10;break}return e.next=3,v.current.onSubmit();case 3:if(t=v.current.getError(),0!==Object.keys(t).length){e.next=8;break}return e.next=7,y.setPageIndex(1);case 7:y.mutate(!1);case 8:e.next=13;break;case 10:return e.next=12,y.setPageIndex(1);case 12:y.mutate(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.Z)({key:e,onReset:x,onRefersh:S,onSearch:j,formatData:o,query:l,updateStore:function(e){b((0,r.Z)({},y,e))},SWRConfiguration:a,form:v,requestOptions:u,updateForm:function(e){h(e)}},y)},B=function(e){var t=e.path,n=e.disabled,r=e.children,o=i.useMemo((function(){return!0}),[t]);return o?r:!o&&n&&i.isValidElement(r)?i.cloneElement(r,{disabled:n}):(0,a.jsx)(i.Fragment,{})},R=["path","children"],T=["visible","title","onClose","width","buttons","children"],A=["label","show","path","disabled"];function V(e){var t=e.path,n=e.children,i=(0,o.Z)(e,R);return t?(0,a.jsx)(B,(0,r.Z)({path:t},i,{children:n})):(0,a.jsx)(a.Fragment,{children:n})}function D(e){var t=e.visible,n=e.title,i=void 0===n?"":n,u=e.onClose,c=void 0===u?null:u,s=e.width,d=void 0===s?800:s,f=e.buttons,p=void 0===f?[]:f,v=e.children,h=(0,o.Z)(e,T);return(0,a.jsx)(l.Drawer,(0,r.Z)({title:i,isOpen:t,onClose:c&&c,size:d,bodyStyle:{padding:"0 10px 45px 10px"},footer:p.map((function(e,t){var n=e.label,i=void 0===n?"":n,u=e.show,c=void 0===u||u,s=e.path,d=e.disabled,f=void 0!==d&&d,p=(0,o.Z)(e,A);return c&&(0,a.jsx)(V,{path:s,children:(0,a.jsx)(l.Button,(0,r.Z)({disabled:f},p,{children:i}))},t)}))},h,{children:v}))}var M=(0,i.memo)(D),N=(0,i.createContext)({}),q=(0,i.createContext)({}),H=n(1361),Y=["uploadType","value","readonly","maxNumber"],z=function(e){var t=e.uploadType,n=e.value,u=e.readonly,c=void 0!==u&&u,s=e.maxNumber,f=(0,o.Z)(e,Y),p=i.useState(!1),v=(0,d.Z)(p,2),h=v[0],m=v[1],g=i.useState(""),y=(0,d.Z)(g,2),b=y[0],x=y[1];return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(l.FileInput,(0,r.Z)({uploadType:t,readonly:c,value:n,maxNumber:s,onPreview:function(e){x(null==e?void 0:e.dataURL),m(!0)}},f,{children:c?null:"card"===t?(0,a.jsx)(l.Icon,{type:"plus"}):"picture"===t||"text"===t?(0,a.jsx)(l.Button,{type:"primary",children:"\u65b0\u589e"}):null})),(0,a.jsx)(l.Modal,{isOpen:h,onClosed:function(){return m(!1)},width:600,confirmButtonProps:{style:{display:"none"}},children:(0,a.jsx)("img",{crossOrigin:"anonymous",src:b,alt:"",style:{width:"100%",height:"100%"}})})]})};function G(e,t,n,o){var u="";if("radio"===e||"searchSelect"===e&&"multiple"!==(null==o?void 0:o.mode)||"select"===e){var c=n.filter((function(e){return e.value===t}))||[];c.length>0&&(u=c[0].label)}else if("checkbox"===e){var s,d=(0,H.Z)(n);try{for(d.s();!(s=d.n()).done;){var f=s.value;t.includes(f.value)&&(u+=""+f.label)}}catch(g){d.e(g)}finally{d.f()}}else if("switch"===e)u=t?"\u662f":"\u5426";else if("timePicker"===e)u=t&&(0,l.formatter)("HH:mm:ss",new Date(t));else if("monthPicker"===e)u=t&&(0,l.formatter)("YYYY-MM",new Date(t));else if("dateInput"===e)u=t&&(0,l.formatter)((null==o?void 0:o.format)||"YYYY-MM-DD",new Date(t));else if("upload"===e){var p=(0,r.Z)({value:t,uploadType:null==o?void 0:o.uploadType,readonly:!0,showFileIcon:{showPreviewIcon:!0,showRemoveIcon:!1}},o);u=(0,a.jsx)(z,(0,r.Z)({},p))}else if("selectMultiple"===e){u=(t&&t.length>0&&t.map((function(e){return e.label}))||[]).join(";")}else if("searchSelect"===e&&"multiple"===(null==o?void 0:o.mode)){var v,h=(0,H.Z)(n);try{for(h.s();!(v=h.n()).done;){var m=v.value;t.includes(m.value)&&(u+=""+m.label)}}catch(g){h.e(g)}finally{h.f()}}else u="rate"===e?(0,a.jsx)(l.Rate,{value:t,readOnly:!0}):"string"===typeof t||"number"===typeof t||i.isValidElement(t)?t:"";return"searchTree"===e&&(u=null==t||null==t.map?void 0:t.map((function(e,n){return n===t.length-1?e.label:e.label+", "}))),u}function W(e){return"string"===typeof e||"number"===typeof e}function J(e){for(var t in e)return!1;return!0}var L=function(e){void 0===e&&(e=[]);var t={};return e.forEach((function(e){var n=e.rules,r=e.key,o=e.value;e.required&&(!o||Array.isArray(o)&&0===o.length)&&(t[r]=function(e){return["input","textarea"].includes(e)?"\u8bf7\u586b\u5199\u5b57\u6bb5":"\u8bf7\u9009\u62e9\u5b57\u77ed"}(r)),n&&n.length>0&&n.forEach((function(e){var n,i=e.validator,l=void 0===i?null:i,a=e.message,u=void 0===a?"":a,c=e.required,s=e.pattern,d=void 0===s?null:s;if(!c||(n=o,"[object Object]"!=Object.prototype.toString.call(n))||!J(o)&&o)if(!c||!function(e){return"[object Array]"==Object.prototype.toString.call(e)}(o)||0!==o.length&&o)if(!c||void 0!==o&&null!==o)if(c&&W(o)&&!o)t[r]=u;else if(l){var f=l(o);f?f&&"string"===typeof f&&(t[r]=f):t[r]=u}else W(o)&&d&&!d.test(o)&&(t[r]=u);else t[r]=u;else t[r]=u;else t[r]=u}))})),t},_=function(e){if(void 0===e&&(e=[]),0===e.length)return!1;var t=e.filter((function(e){return e.required||!1}));return!!(t&&t.length>0)};var K=function(e){var t=e.formDatas,n=void 0===t?[]:t,o=e.formfields,u=e.onSubmit,c=e.onChange,s=e.onSubmitError,d=e.buttonsContainer,f=e.showSaveButton,p=void 0!==f&&f,v=e.showResetButton,h=void 0!==v&&v,m=e.saveButtonProps,g=void 0===m?{}:m,y=e.resetButtonProps,b=void 0===y?{}:y,x=e.formInstanceRef,S=e.className,j=e.style,Z=(0,i.useRef)(null),k=(0,i.useContext)(N),w=(0,i.useContext)(q),C=k.setFormState;(0,i.useEffect)((function(){return null==C?void 0:C(Z)}),[Z]),(0,i.useEffect)((function(){Z&&Z.current&&(x.current=Z)}),[Z]);var P=(0,r.Z)({background:"#fff",paddingBottom:10},j);return(0,a.jsx)(l.Form,{className:S,ref:Z,style:P,resetOnSubmit:!1,onSubmit:function(e){var t=e.initial,r=e.current,o=n.filter((function(e){return!0!==e.hide})).map((function(e){return{key:e.key,value:r[e.key],rules:e.rules,required:e.required}}))||[],i=L(o);if(Object.keys(i).length>0){var l=new Error;throw l.filed=i,l}null==u||u(t,r)},onChange:function(e){var t=e.initial,n=e.current;return null==c?void 0:c(t,n)},onSubmitError:function(e){if(!s)return e.filed?(0,r.Z)({},e.filed):null;null==s||s(e)},fields:o,children:function(e){var t=e.fields,n=void 0===t?{}:t,o=(e.state,e.canSubmit),u=void 0===o?function(){return!1}:o,c=e.resetForm;return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(l.Row,{gutter:10,children:Object.keys(n).map((function(e){var t,o,a,u,c=(null==(t=n[e])||null==(o=t.props)?void 0:o.span)||w&&w.span||"8",s=(null==(a=n[e])||null==(u=a.props)?void 0:u.colstyle)||{};return(0,i.createElement)(l.Col,(0,r.Z)({},w,{style:(0,r.Z)({},w&&w.style||{},s),key:e,span:c}),n[e])}))}),(0,a.jsxs)("div",{className:"w-form-item-center",style:(0,r.Z)({},d),children:[(0,a.jsx)(l.Button,(0,r.Z)({style:{display:p?"flex":"none"},disabled:!u(),htmlType:"submit"},g,{children:g.label||"\u63d0\u4ea4"})),(0,a.jsx)(l.Button,(0,r.Z)({style:{display:h?"flex":"none"},onClick:c},b,{children:b.label||"\u91cd\u7f6e"}))]})]})}})},U=function(e){var t=e.title,n=e.formDatas,o=e.readOnlyProps,i=e.className,u=e.style;return(0,a.jsx)(l.Descriptions,(0,r.Z)({bordered:!0,title:t},o,{className:i,style:(0,r.Z)({width:"100%"},u),children:null==n?void 0:n.map((function(e,t){var n=e.hide,r=e.label,o=e.widget,i=e.initialValue,u=void 0===i?"":i,c=e.option,s=void 0===c?[]:c,d=e.readSpan,f=void 0===d?1:d,p=e.widgetProps,v=void 0===p?{}:p;return n?null:(0,a.jsx)(l.Descriptions.Item,{span:f,label:r,children:G(o,u,s,v)},t)}))}))},Q=["option"],X=function(e){var t=e.option,n=(0,o.Z)(e,Q);return(0,a.jsx)(l.Checkbox.Group,(0,r.Z)({},n,{children:t&&t.map((function(e){return(0,a.jsx)(l.Checkbox,{value:e.value,children:e.label},e.value)}))}))},$=n(8079);var ee=function(e){var t=e.option,n=void 0===t?[]:t,r=e.onChange,o=e.onSelect,u=e.onSearch,c=e.onBlur,s=e.onClear,f=e.value,p=void 0===f?[]:f,v=e.loading,h=void 0===v||v,m=e.disabled,g=void 0!==m&&m,y=e.placeholder,b=void 0===y?"\u8bf7\u9009\u62e9":y,x=e.allowClear,S=void 0!==x&&x,j=e.noContent,Z=e.showSearch,k=void 0!==Z&&Z,w=e.maxCount,C=void 0===w?3:w,P=(0,i.useState)(p),O=(0,d.Z)(P,2),E=O[0],F=O[1],I=(0,i.useState)(""),B=(0,d.Z)(I,2),R=B[0],T=B[1],A=(0,i.useState)(!1),V=(0,d.Z)(A,2),D=V[0],M=V[1],N=E.length===C,q=function(e,t){var n=t.target;"search"===e&&(M(!0),T(n.value),null==u||u(n.value)),"blur"===e&&(T(""),M(!1),null==c||c()),"clean"===e&&(T(""),F([]),M(!1),null==s||s([]))},H=i.useMemo((function(){var e=E&&E.length>0&&E.map((function(e){return e.label}))||[];return D?R:e.join(";")}),[E,R,D]);function Y(){return!D&&S&&E.length>0?"close":D&&h?"loading":"search"}return(0,a.jsx)(l.Popover,{trigger:"focus",placement:"bottomLeft",content:n&&n.length>0?(0,a.jsx)(l.Menu,{style:{minHeight:25,maxHeight:150,overflowY:"scroll",width:200},children:n.map((function(e,t){var i=E&&-1!==E.findIndex((function(t){return t.value===e.value}));return(0,a.jsx)(l.Menu.Item,{style:{marginBottom:n.length-1===t?0:5},active:i,text:e.label,disabled:e.disabled,onClick:function(t){M(!1),t.preventDefault(),function(e){var t=(0,$.Z)(E);t.find((function(t){return t.value===e.value}))||N?t=t.filter((function(t){return t.value!==e.value})):t.push(e),F(t),null==r||r(t),null==o||o(e)}(e)}},e.value)}))}):j||(0,a.jsx)(l.Loader,{loading:h,color:"black",children:(0,a.jsxs)("div",{style:{padding:10,height:70,width:200,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontSize:12,color:"#888"},children:[(0,a.jsx)(l.Icon,{type:"file-unknown",style:{fontSize:20}}),"\u6682\u65e0\u6570\u636e"]})}),visibleArrow:!1,children:(0,a.jsx)(l.Input,{readOnly:!k,disabled:g,placeholder:b,value:H,onChange:function(e){return q("search",e)},onBlur:function(e){return q("blur",e)},addonAfter:(0,a.jsx)(l.Icon,{type:Y(),spin:h,onClick:"close"===Y()?q.bind(this,"clean"):void 0})})})},te=["option"],ne=function(e){var t=e.option,n=(0,o.Z)(e,te);return(0,a.jsx)(l.SearchTree,(0,r.Z)({options:t},n))},re=["hide","widgetProps","key","widget","label","initialValue","required"];function oe(e,t){var n,u=e.formDatas,c=void 0===u?[]:u,d=e.title,p=void 0===d?"":d,v=e.formType,h=void 0===v?"card":v,m=e.readOnly,g=void 0!==m&&m,y=e.customWidgetsList,b=void 0===y?{}:y,x=e.form,j=e.cardProps,k=void 0===j?{}:j,w=e.collapseProps,C=void 0===w?{}:w,P=e.collapsePanelProps,O=void 0===P?{}:P,E=e.colProps,F=(0,i.useMemo)((function(){return function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={});var i=(0,r.Z)({input:l.Input,inputNumber:l.InputNumber,radio:Z,checkbox:X,switch:l.Switch,select:S,searchSelect:l.SearchSelect,selectMultiple:ee,textarea:l.Textarea,dateInput:l.DateInput,timePicker:l.TimePicker,monthPicker:l.MonthPicker,upload:z,rate:l.Rate,searchTree:ne},n),u={};return t.forEach((function(t){if(e||delete t.readSpan,t){var n=t.hide,l=void 0!==n&&n,c=t.widgetProps,s=t.key,d=t.widget,f=t.label,p=t.initialValue,v=(0,o.Z)(t,re);if(!l){var h=s,m=i[d],g=_((null==v?void 0:v.rules)||[]);u[h]=(0,r.Z)({label:g?(0,a.jsx)("span",{className:"w-proform-label",children:f}):f,children:(0,a.jsx)(m,(0,r.Z)({},c))},v,{initialValue:p})}}})),u}(g,c,b)}),[c]),I=(x||{}).setFormState,B=(0,i.useMemo)((function(){return{setFormState:I}}),[x]),R=(0,i.useRef)();(0,i.useImperativeHandle)(t,(function(){var e,t=function(){var e,t;return(null==R||null==(e=R.current)||null==(t=e.current)?void 0:t.onSubmit())||null},n=function(){var e,t;return(null==R||null==(e=R.current)||null==(t=e.current)?void 0:t.getFieldValues())||{}},o=function(){var e,t;return(null==R||null==(e=R.current)||null==(t=e.current)?void 0:t.getError())||{}};return(0,r.Z)({},null==(e=R.current)?void 0:e.current,{getError:o,getFieldValues:n,submitvalidate:t,validateFieldsAndGetValue:function(){return new Promise(function(){var e=(0,f.Z)((0,s.Z)().mark((function e(r,i){var l,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return e.next=4,o();case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:if(!J(l=e.t0)){e.next=18;break}return e.next=11,n();case 11:if(e.t1=e.sent,e.t1){e.next=14;break}e.t1={};case 14:a=e.t1,r(a),e.next=19;break;case 18:i(l);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}})}));var T=(0,r.Z)({},e,{formfields:F,formInstanceRef:R}),A=g?void 0:p,V=g?(0,a.jsx)(U,(0,r.Z)({},e)):(0,a.jsx)(K,(0,r.Z)({},T));return n="card"===h?(0,a.jsx)(l.Card,(0,r.Z)({title:A},k,{children:V})):"collapse"===h?(0,a.jsx)(l.Collapse,(0,r.Z)({activeKey:"1"},C,{children:(0,a.jsx)(l.Collapse.Panel,(0,r.Z)({header:p},O,{children:V}),"1")})):V,(0,a.jsx)(N.Provider,{value:B,children:(0,a.jsx)(q.Provider,{value:E||{},children:(0,a.jsx)("div",{className:"uiw-admin-proform",children:n})})})}var ie=(0,i.forwardRef)(oe),le=function(){var e=(0,i.useState)(),t=(0,d.Z)(e,2),n=t[0],o=t[1],l=function(){var e;return(null==n||null==(e=n.current)?void 0:e.onSubmit())||null},a=function(){var e;return(null==n||null==(e=n.current)?void 0:e.getFieldValues())||{}},u=function(){var e;return(null==n||null==(e=n.current)?void 0:e.getError())||{}};return(0,r.Z)({},null==n?void 0:n.current,{submitvalidate:l,getError:u,getFieldValues:a,validateFieldsAndGetValue:function(){return new Promise(function(){var e=(0,f.Z)((0,s.Z)().mark((function e(t,n){var r,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:J(r=u())?(o=a(),t(o)):n(r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},setFormState:o})},ae=function(e,t){var n={};return Object.entries(t).forEach((function(t){var r=(0,d.Z)(t,2),o=r[0],i=r[1];if(i){var l=e[o],a=i.map((function(e){if("function"===typeof e)return e(l);if(e&&"object"===typeof e){if(e.required&&!function(e){return"number"===typeof e||("string"===typeof e?!!e:Array.isArray(e)?!!e.length:"function"===typeof e||"boolean"===typeof e||("[object Object]"===Object.prototype.toString.call(e)?!!Object.keys(e).length:!!e))}(l))return e.message;if(e.pattern instanceof RegExp)return e.pattern.test(l)}return!1})).filter(Boolean);a.length&&(n[o]=a)}})),n};var ue=function(e){var t=e.fields,n=e.buttonGroup,o=e.buttonGroupClassName,u=e.buttonGroupStyle,c=e.showSaveButton,s=void 0!==c&&c,f=e.showResetButton,p=void 0!==f&&f,v=e.saveButtonProps,h=void 0===v?{}:v,m=e.resetButtonProps,g=void 0===m?{}:m,y=n||[(0,r.Z)({style:{display:s?"flex":"none"},htmlType:"submit",children:h.label||"\u63d0\u4ea4"},h),(0,r.Z)({style:{display:p?"flex":"none"},children:g.label||"\u91cd\u7f6e",htmlType:"reset"},g)];return(0,a.jsx)(l.Form,{onChange:function(t){return null==e.onChange?void 0:e.onChange(t)},onSubmitError:function(t){if(!e.onSubmitError)return t.filed?(0,r.Z)({},t.filed):null;e.onSubmitError(t)},fields:t,onSubmit:function(n,r){var o=n.initial,i=n.current;if(e.onSubmit)e.onSubmit({initial:o,current:i},r);else{var l=ae(i,function(e){var t={};return Object.entries(e||{}).map((function(e){var n=(0,d.Z)(e,2),r=n[0],o=n[1];o.rules&&(t[r]=o.rules)})),t}(t));if(Object.keys(l).length){var a=new Error;throw a.filed=l,a}}},children:function(n){var c=n.fields,s=n.canSubmit,d=n.resetForm;return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(l.Row,{gutter:10,children:c&&Object.keys(c).map((function(n){var o=(0,r.Z)({},e.colProps||{});return t&&(o=(0,r.Z)({},o,t[n].colProps||{})),(0,a.jsx)(l.Col,(0,r.Z)({span:8},o,{children:c[n]}),n)}))}),(0,a.jsx)("div",{className:"w-form-item-center "+o,style:u,children:y.map((function(e,t){if("function"===typeof e)return e(n);var o=(0,r.Z)({},e);return"submit"===e.htmlType?o.disabled=!(null!=s&&s()):"reset"===e.htmlType&&(o.onClick=d),(0,a.jsx)(l.Button,(0,r.Z)({},o),t)}))})]})}})}},5386:function(e,t,n){"use strict";n.d(t,{WY:function(){return f}});var r=n(6234),o=n(7896),i=n(1461),l=n(7303),a=n.n(l);var u=n(6387),c=n.n(u),s=["body","headers","requestType"],d={200:"\u670d\u52a1\u5668\u6210\u529f\u8fd4\u56de\u8bf7\u6c42\u7684\u6570\u636e\u3002",201:"\u65b0\u5efa\u6216\u4fee\u6539\u6570\u636e\u6210\u529f\u3002",202:"\u4e00\u4e2a\u8bf7\u6c42\u5df2\u7ecf\u8fdb\u5165\u540e\u53f0\u6392\u961f\uff08\u5f02\u6b65\u4efb\u52a1\uff09\u3002",204:"\u5220\u9664\u6570\u636e\u6210\u529f\u3002",400:"\u53d1\u51fa\u7684\u8bf7\u6c42\u6709\u9519\u8bef\uff0c\u670d\u52a1\u5668\u6ca1\u6709\u8fdb\u884c\u65b0\u5efa\u6216\u4fee\u6539\u6570\u636e\u7684\u64cd\u4f5c\u3002",401:"\u7528\u6237\u6ca1\u6709\u6743\u9650\uff08\u4ee4\u724c\u3001\u7528\u6237\u540d\u3001\u5bc6\u7801\u9519\u8bef\uff09\u3002",403:"\u7528\u6237\u5f97\u5230\u6388\u6743\uff0c\u4f46\u662f\u8bbf\u95ee\u662f\u88ab\u7981\u6b62\u7684\u3002",404:"\u53d1\u51fa\u7684\u8bf7\u6c42\u9488\u5bf9\u7684\u662f\u4e0d\u5b58\u5728\u7684\u8bb0\u5f55\uff0c\u670d\u52a1\u5668\u6ca1\u6709\u8fdb\u884c\u64cd\u4f5c\u3002",406:"\u8bf7\u6c42\u7684\u683c\u5f0f\u4e0d\u53ef\u5f97\u3002",410:"\u8bf7\u6c42\u7684\u8d44\u6e90\u88ab\u6c38\u4e45\u5220\u9664\uff0c\u4e14\u4e0d\u4f1a\u518d\u5f97\u5230\u7684\u3002",422:"\u5f53\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\u65f6\uff0c\u53d1\u751f\u4e00\u4e2a\u9a8c\u8bc1\u9519\u8bef\u3002",500:"\u670d\u52a1\u5668\u53d1\u751f\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u670d\u52a1\u5668\u3002",502:"\u7f51\u5173\u9519\u8bef\u3002",503:"\u670d\u52a1\u4e0d\u53ef\u7528\uff0c\u670d\u52a1\u5668\u6682\u65f6\u8fc7\u8f7d\u6216\u7ef4\u62a4\u3002",504:"\u7f51\u5173\u8d85\u65f6\u3002"};function f(e,t){void 0===t&&(t={});var n=t.method||"GET",l=t,u=l.body,f=l.headers,p=l.requestType,v=void 0===p?"json":p,h=(0,i.Z)(t,s);(null==u?void 0:u.swr_Rest_Time)&&delete u.swr_Rest_Time;var m=(0,o.Z)({},h,{url:e,method:n,data:u});if("json"===v)m.headers=(0,o.Z)({"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},f||{}),m.data=JSON.stringify(u||{});else if("form"===v){var g=new FormData;Object.entries(u||{}).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],o=t[1];g.append(n,o)})),m.headers=(0,o.Z)({Accept:"application/json"},f||{}),m.data=g}else"urlencoded"===v&&(m.headers=(0,o.Z)({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Accept:"application/json"},f||{}),m.data=c().stringify(u||{},{arrayFormat:"repeat"}));/(GET)/.test(n)&&(m.url=function(e,t){var n=e,r=[];return Object.keys(t).forEach((function(e){return r.push(e+"="+t[e])})),0===Object.keys(t).length?e:(!1===/\?/.test(n)?n=n+"?"+r.join("&"):n+="&"+r.join("&"),n)}(e,(0,o.Z)({},u)),delete m.body);var y=sessionStorage.getItem("token")||localStorage.getItem("token");return y&&(m.headers=(0,o.Z)({},m.headers||{},{token:y})),a().request(m).then((function(e){return e.data})).catch((function(e){var t=e.response;if(t.status>=200&&t.status<300)return t;var n=t.status,r=d[n]||t.statusText,o=new Error(r);if(o.name=t.status,t.data)return t.data;throw o}))}},3260:function(){}}]);
//# sourceMappingURL=230.50e3c9cb.chunk.js.map