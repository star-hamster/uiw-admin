"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[829],{1505:function(e,n,t){t.r(n),t.d(n,{default:function(){return _},useLayouts:function(){return H}});var r=t(6234),i=t(7896),a=t(1461),o=t(6976),l=t(8438),u=t(2963),c=t.n(u),s=t(5553),d=t(6416),h=t(6032),f=t(5596),p=t(9249),m=t(7371),v=["children"];var x=function e(n,t){return void 0===n&&(n=[]),void 0===t&&(t=[]),n.forEach((function(n){n.children?(e(n.children,t),n.side&&t.push(n)):t.push(n)})),t},g=function e(n,t){return void 0===n&&(n=[]),void 0===t&&(t=[]),n.forEach((function(n){var r=n.children,i=(0,a.Z)(n,v);Array.isArray(r)&&e(r,t),t.push(i)})),t},y=function(){function e(n){(0,p.Z)(this,e),this.breadcrumb=new Map([]),this.flat=[],this.init(n)}return(0,m.Z)(e,[{key:"init",value:function(e,n){var t=this;e.forEach((function(e){var r=(n||[]).concat([e]);e.children&&t.init(e.children,r),e.path&&"*"!==e.path&&t.breadcrumb.set(e.path,r),t.flat.push(e)}))}}]),e}(),j=t(6247),M=t.n(j),b=t(4218),S=function(e){var n=(e||{}).routes,t=void 0===n?[]:n,i=(0,d.TH)(),a=(0,d.s0)(),u=o.useMemo((function(){return x(t)}),[t]),c=o.useMemo((function(){return u.filter((function(e){return e&&"name"in e&&!e.hideInMenu&&!e.hiddenMainMenu&&!e.index&&!e.redirect&&"*"!==e.path})).map((function(e){var n=M()(e.name||"",{style:M().STYLE_FIRST_LETTER}),t=M()(e.name||"",{style:M().STYLE_NORMAL}),r="",i="";return Array.isArray(t)&&(i=t.join("")),Array.isArray(n)&&(r=n.join("")),{label:e.name,value:e.path,py:i,pyInitials:r}}))}),[u]),s=o.useState(c),h=(0,r.Z)(s,2),f=h[0],p=h[1];return(0,b.jsx)("div",{style:{marginBottom:10,padding:"0px 10px"},children:(0,b.jsx)(l.SearchSelect,{placeholder:"\u8bf7\u8f93\u5165",mode:"single",labelInValue:!0,showSearch:!0,option:f,onSearch:function(e){if(e){var n=c.filter((function(n){var t=new RegExp(""+e);return!!(t.test(n.label)||t.test(n.py)||t.test(n.pyInitials))}));p(n)}else p(c)},onChange:function(e){if(Array.isArray(e)){var n=(0,r.Z)(e,1)[0];if(n&&"object"===typeof n&&n.value){var t=u.find((function(e){return e.path===n.value}));if(!w(t,a,{location:i}))return;a(t.path,{replace:!0})}}},className:"uiw-admin-search"})})},w=function(e,n,t){if(!(e&&Reflect.has(e,"navigate")&&e.navigate))return!0;if("function"!==typeof e.navigate){var r=new Function("return "+e.navigate)();"function"===typeof r&&r(n,t)}else e.navigate(n,t)};function C(e,n,t,r,a,u){return void 0===e&&(e=[]),e.map((function(e,s){var d={key:s,icon:e.icon?(0,b.jsx)(l.Icon,{type:e.icon}):void 0},p=!0;return Reflect.has(e,"isAuth")&&(p=Reflect.get(e,"isAuth")),e.index&&e.redirect||e.hideInMenu||e.hiddenMainMenu||!p||"*"===e.path?(0,b.jsx)(o.Fragment,{},s):(u&&(d.className=c()({"uiw-admin-global-sider-menu-collapsed":n})),(0,h.LX)({path:e.path},t)&&(d.active=!0),e.children&&!e.side?(n&&(d.overlayProps={isOutside:!0,usePortal:!0}),e.children.find((function(e){return e.path===t}))&&!n&&(d.overlayProps={isOpen:!0}),(0,b.jsx)(f.ZP.SubMenu,(0,i.Z)({},d,{text:e.name||"-",collapse:n,children:C(e.children,n,t,r,a)}))):(0,b.jsx)(f.ZP.Item,(0,i.Z)({},d,{onClick:function(){if(w(e,r,a))if(e.children&&e.children.length>0){var n=e.children.filter((function(e){return e.redirect}));r(n[0].redirect,{replace:!0})}else r(e.path,{replace:!0})},text:e.name||"-"})))}))}var k=function(e){void 0===e&&(e={});var n=e,t=n.routes,r=void 0===t?[]:t,i=n.collapsed,a=n.allRoutes,l=(0,d.TH)(),u=(0,d.s0)(),c=l.pathname,s=i||(0,b.jsx)(S,{routes:a});return(0,b.jsxs)(o.Fragment,{children:[s,(0,b.jsx)(f.ZP,{theme:"dark",inlineCollapsed:!!i,style:{padding:"0 12px"},children:C(r,!!i,c,u,{location:l},!0)})]})},F=function(e){var n=e.routeMap,t=e.sideMenusMap,r=(0,d.s0)(),i=(0,d.TH)(),a=o.useMemo((function(){var e,t=n.breadcrumb.get(i.pathname);return t||(n.breadcrumb.forEach((function(n,t){(0,h.LX)(t,i.pathname)&&(e=t)})),e&&n.breadcrumb.get(e)||[])}),[i.pathname]);return(0,b.jsx)(l.Breadcrumb,{className:"uiw-admin-breadcrumb",children:null==a?void 0:a.map((function(e,a){return(0,b.jsx)(l.Breadcrumb.Item,{onClick:function(){if(e.side&&e.path){var a=t.flatSide.get(e.path);if(a){if(!w(e,r,{location:i}))return;var o=n.flat.find((function(e){return e.path===a}));if(o&&o.children&&o.children.length>0){var l=o.children.find((function(e){return e.redirect}));r(l&&l.redirect||a,{replace:!0})}else r(a,{replace:!0})}}else if(e.path){var u;if(e&&null!=e&&e.children&&(null==e||null==(u=e.children)?void 0:u.length)>0){var c=e.children[0].path;c&&r(c,{replace:!0})}}},children:e.name},a)}))})},I=function(e){return(0,b.jsx)("div",{style:{padding:14,overflowY:"auto",height:"100%"},children:e.children})},L=function(e){var n=e.sideItemIndex,t=(0,d.TH)(),r=(0,d.s0)();if(n&&n.index&&n.path&&"*"!==n.path&&"/"!==n.path){if(n.navigate)if(!w(n,r,{location:t}))return(0,b.jsx)(o.Fragment,{});return(0,b.jsx)(o.Fragment,{children:(0,b.jsx)(d.Fg,{to:n.path,replace:!0})})}return(0,b.jsx)(o.Fragment,{children:e.children})},N=function(e){var n=e.type,t=e.style,r=e.iconSTyle,i=e.color,a=e.className,o=e.onClick,u=[a,"uiw-admin-icons"].filter(Boolean).join(" ").trim();return(0,b.jsx)("div",{style:{display:"inline-flex",alignItems:"center"},children:(0,b.jsx)("div",{className:u,style:t,onClick:function(){return null==o?void 0:o()},children:n&&(0,b.jsx)(l.Icon,{type:n,color:i,style:r})})})},R=o.createContext({headerLayout:"top",headerBackground:"#fff",headerFontColor:"#000"}),Z=function(){return o.useContext(R)},E=function(e){var n=e.routeData,t=void 0===n?[]:n,r=(0,d.TH)(),i=function(e){var n=new Map([]),t=new Map([]),r=new Map([]);return function e(i,a){i.forEach((function(i){var o=i.path,l=i.side,u=i.children;Array.isArray(u)&&e(u,l?o:a),l&&o&&u&&n.set(o,u),o&&(l?t.set(o,o):a&&t.set(o,a),r.set(o,a||"/"))}))}(e),{sideMenus:n,flat:t,flatSide:r}}(t),a=function(e,n){var t=e.find((function(e){return e.path===n}));return t||(e.find((function(e){return e.path&&"*"!==e.path&&(0,h.LX)({path:e.path},n)}))||void 0)}(g(t),r.pathname),l=null==a?void 0:a.hiddenMainMenu,u=o.useMemo((function(){var e=i.flat.get((null==a?void 0:a.path)||"");return e&&"/"!==e?{routeData:i.sideMenus.get(e)||[],parentPath:e}:{routeData:t,parentPath:e}}),[a,t,i]);return{sideItemIndex:o.useMemo((function(){if(a&&a.side){var e=u.routeData.find((function(e){return e.index}));if(e)return e}}),[r.pathname,a]),ChildMenus:u,sideMenusMap:i,hiddenMainMenu:l}};function T(){var e=document;return e.mozFullScreen||e.webkitIsFullScreen||e.webkitFullScreen||e.msFullScreen}var A=function(){if(!function(){var e=document;return e.fullscreenEnabled||e.mozFullScreenEnabled||e.webkitFullscreenEnabled||e.msFullscreenEnabled}())return null;var e=(0,o.useState)(!1),n=(0,r.Z)(e,2),t=n[0],i=n[1];if(t){var a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen&&a.msRequestFullscreen()}else if(T()){var l=document;l.exitFullscreen?l.exitFullscreen():l.webkitCancelFullScreen?l.webkitCancelFullScreen():l.mozCancelFullScreen?l.mozCancelFullScreen():l.msExitFullscreen&&l.msExitFullscreen()}var u=Z().headerFontColor,c=function(){!T()&&t&&i(!1)};return(0,o.useEffect)((function(){return window.addEventListener("resize",c),function(){window.removeEventListener("resize",c,!1)}})),(0,o.useMemo)((function(){return(0,b.jsx)(N,{type:t?"shrink":"arrows-alt",iconSTyle:{fontSize:18},color:u,onClick:function(){return i(!t)},style:{marginRight:10}})}),[t])},B=t(8079),P=["title","icon","onClick","divider","render"];function z(e){var n=e.menus,t=void 0===n?[]:n,r=e.profile,u=void 0===r?{}:r,c=e.onReloadAuth,s=e.layouts,h=e.hideReloadButton,f=e.hideLogoutButton,p=e.hideUserInfo,m=e.onLogout,v=s||{},x=v.headerRightvisible,g=v.updateStore,y=(0,d.s0)(),j=[].concat((0,B.Z)(p?[]:[{title:(0,b.jsxs)("span",{style:{fontSize:15},children:["\u8d26\u53f7 ",(null==u?void 0:u.userName)||"admin"]}),icon:(0,b.jsx)(l.Icon,{type:"user"})},{divider:!0}]),(0,B.Z)(t),[{title:"\u5237\u65b0\u6743\u9650",icon:(0,b.jsx)(l.Icon,{type:"reload"}),onClick:function(){return c()},style:{display:h?"none":""}},{title:"\u9000\u51fa\u767b\u5f55",icon:(0,b.jsx)(l.Icon,{type:"logout"}),style:{display:f?"none":""},onClick:function(){m?m(y):(y("/login",{replace:!0}),sessionStorage.removeItem("token"),sessionStorage.removeItem("auth"),localStorage.removeItem("token"),localStorage.removeItem("auth"))}}]),M=(0,b.jsx)("div",{style:{width:150},children:(0,b.jsx)(l.Menu,{children:j.map((function(e,n){var t=e.title,r=e.icon,u=e.onClick,c=e.divider,s=e.render,d=(0,a.Z)(e,P);return c?(0,b.jsx)(l.Menu.Divider,{},n):s?(0,b.jsx)(o.Fragment,{children:s},n):(0,b.jsx)(l.Menu.Item,(0,i.Z)({text:t,icon:r},d,{onClick:u&&u}),n)}))})}),S=(0,o.useMemo)((function(){var e=null==u?void 0:u.avatar,n=null==u?void 0:u.userName,t=n?n.trim().split("")[0]:"";return e?(0,b.jsx)("img",{src:e,alt:t}):n?(0,b.jsx)("div",{className:"avatar",children:t}):(0,b.jsx)("div",{style:{display:"inline-flex",alignItems:"center"},children:(0,b.jsx)(N,{type:"user",iconSTyle:{fontSize:18}})})}),[null==u?void 0:u.avatar,null==u?void 0:u.userName]);return(0,b.jsx)("div",{className:"uiw-global-header-menu",children:(0,b.jsx)(l.Popover,{isOpen:!!x,onVisibleChange:function(e){return null==g?void 0:g({headerRightvisible:e})},trigger:"click",placement:"bottomRight",content:M,children:S})})}var D=t(8258),q=function(e){void 0===e&&(e={});var n=Z(),t=n.headerFontColor,r=n.headerLayout,a=(0,o.useMemo)((function(){return e.logo&&(0,b.jsx)("img",{src:e.logo,alt:e.projectName||"logo"})}),[e.logo]),l=(0,o.useMemo)((function(){return e.projectName&&(0,b.jsx)("div",{style:"top"===r?{color:t}:{},children:e.projectName})}),[e.projectName,t]),u=(0,o.useMemo)((function(){var n=e.onLogoClick;return n&&"function"===typeof n?{onClick:function(e){n(e),e.stopPropagation(),e.preventDefault()}}:{}}),[e.onLogoClick]);return(0,o.useMemo)((function(){return(0,b.jsx)("div",{className:"default"===r?"uiw-admin-global-title":"uiw-admin-global-title-top",children:(0,b.jsxs)(D.rU,(0,i.Z)({to:"/"},u,{style:e.collapsed?{justifyContent:"center"}:{},children:[a,!e.collapsed&&l]}))})}),[e.collapsed])},H=function(){var e=(0,o.useState)({headerRightvisible:!1}),n=(0,r.Z)(e,2),t=n[0],a=n[1],l=function(e){a((0,i.Z)({},t,e))};return(0,i.Z)({closeMenu:function(){return l({headerRightvisible:!1})},updateStore:l},t)},U=["className","routes","projectName","profile","menus","onReloadAuth","layouts","headerLayout","headerBackground","headerFontColor","isDefaultContentStyle","hideReloadButton","hideLogoutButton","hideUserInfo","onLogoClick"],O=l.Layout.Header,X=l.Layout.Sider,Y=l.Layout.Content;var _=function(e){var n=e||{},t=n.className,u=n.routes,d=void 0===u?[]:u,h=n.projectName,f=void 0===h?"UIW Admin":h,p=n.profile,m=void 0===p?{}:p,v=n.menus,x=void 0===v?[]:v,g=n.onReloadAuth,j=n.layouts,M=n.headerLayout,S=void 0===M?"default":M,w=n.headerBackground,C=void 0===w?"#fff":w,Z=n.headerFontColor,T=void 0===Z?"#000":Z,B=n.isDefaultContentStyle,P=void 0===B||B,D=n.hideReloadButton,H=n.hideLogoutButton,_=n.hideUserInfo,V=n.onLogoClick,J=(0,a.Z)(n,U),K=e.menuHide,W=(0,o.useState)(!1),G=(0,r.Z)(W,2),Q=G[0],$=G[1],ee=E({routeData:d}),ne=ee.sideItemIndex,te=ee.ChildMenus,re=ee.sideMenusMap;K=ee.hiddenMainMenu;var ie=o.useMemo((function(){return(0,b.jsx)(k,{collapsed:Q,routes:te.routeData,allRoutes:d})}),[te,Q]),ae=o.useMemo((function(){return new y(d)}),[d]),oe=(0,o.useMemo)((function(){return(0,b.jsxs)("div",{style:{display:"flex",justifyItems:"center",alignItems:"center"},children:[null==m?void 0:m.menuLeft,(0,b.jsx)(A,{}),(0,b.jsx)(z,{onReloadAuth:g,profile:m,menus:x,layouts:j,hideReloadButton:D,hideLogoutButton:H,hideUserInfo:_})]})}),[m,x,JSON.stringify(j)]),le=[t,"uiw-admin-global-header"].filter(Boolean).join(" ").trim(),ue=(0,b.jsxs)(O,(0,i.Z)({},J,{className:le,style:(0,i.Z)({background:C,color:T},e.style),children:[(0,b.jsxs)("div",{style:{display:"flex"},children:["top"===S&&(0,b.jsx)("div",{children:(0,b.jsx)(q,{onLogoClick:V,collapsed:!1,projectName:f,logo:e.logo})}),!K&&(0,b.jsxs)("div",{className:"uiw-admin-nav",children:[(0,b.jsx)(N,{type:Q?"menu-unfold":"menu-fold",iconSTyle:{fontSize:18},color:T,onClick:function(){return $(!Q)},style:{marginRight:10}}),(0,b.jsx)(F,{sideMenusMap:re,routeMap:ae})]})]}),oe]}));return(0,b.jsx)(o.Fragment,{children:(0,b.jsxs)(R.Provider,{value:{headerLayout:S,headerBackground:C,headerFontColor:T},children:[(0,b.jsx)(s.Z,{title:f||""}),(0,b.jsxs)(l.Layout,{style:{height:"100%"},children:["top"===S&&ue,(0,b.jsxs)(l.Layout,{children:[!K&&(0,b.jsxs)(X,{collapsed:Q,className:c()("uiw-admin-global-sider-menu",{}),width:220,children:["default"===S?(0,b.jsx)(q,{onLogoClick:V,collapsed:Q,projectName:f,logo:e.logo}):(0,b.jsx)("div",{style:{marginTop:10}}),ie]}),(0,b.jsxs)(l.Layout,{children:["default"===S&&ue,P?(0,b.jsx)(Y,{className:"uiw-admin-global-content",children:(0,b.jsx)(L,{sideItemIndex:ne,children:(0,b.jsx)(I,{children:e.children})})}):(0,b.jsx)(L,{sideItemIndex:ne,children:e.children})]})]})]})]})})}},640:function(e,n,t){t.r(n),t.d(n,{default:function(){return f}});var r=t(8079),i=t(6234),a=t(9651),o=t(6976),l=t(8438),u=t(6416),c=t(6032),s=function(e,n){return e.find((function(e){return"/"===n.pathname&&e.index&&e.redirect?e.index:!!(n&&n.pathname&&e.path&&"/"!==n.pathname)&&n.pathname===e.path}))},d=function(e,n){return e.find((function(e){return"/"===n.pathname&&e.index&&e.redirect?e.index:!!(n&&n.pathname&&e.path&&"/"!==n.pathname)&&(0,c.LX)({path:e.path},n.pathname)}))},h=t(4218),f=function(e){var n=e.routes,t=(0,u.TH)(),f=(0,u.s0)(),p=o.useState([]),m=(0,i.Z)(p,2),v=m[0],x=m[1],g=function(e,n){var t=s(e,n);if(t)return{current:t,isMatch:!1};var r=d(e,n);return{current:r,isMatch:!!r}}(o.useMemo((function(){return function(e){void 0===e&&(e=[]);var n=[];return function e(t){t.forEach((function(t){t.children?e(t.children):n.push(t)}))}(e),n}(n)}),[n]),t);o.useEffect((function(){if(g.current&&g.current.redirect)f(g.current.redirect);else{var e=function(e,n,t){return t?d(e,n):s(e,n)}(v,t,g.isMatch);e?e&&g.isMatch&&(e.location.pathname!==t.pathname||e.location.search!==t.search)&&x((function(n){return n.map((function(n){return e.location.pathname===n.location.pathname?(0,a.Z)({},n,{location:t}):n}))})):x((function(e){return e.concat([(0,a.Z)({},g.current,{isMatch:g.isMatch,location:t})]).filter((function(e){return!!e}))}))}}),[t.pathname]),o.useMemo((function(){var e=(0,r.Z)(v).map((function(e){return e.location.pathname===t.pathname&&t.search!==e.location.search&&(e.location=t),e}));x((function(){return(0,r.Z)(e)}))}),[t.search]);return(0,h.jsxs)("div",{className:"uiw-layout-tabs-warp",children:[(0,h.jsx)(l.Tabs,{className:"uiw-tabs-warp",type:"card",activeKey:t.pathname,onTabClick:function(e){var n=v.find((function(n){return n.location.pathname===e}));n&&t.pathname!==e&&f(""+e+n.location.search,{state:n.location.state,replace:!0})},children:v.map((function(e,n){return(0,h.jsx)(l.Tabs.Pane,{label:(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.name,v.length>1?(0,h.jsx)(l.Icon,{type:"close",tagName:"span",style:{marginLeft:10},onClick:function(r){return function(e,n,r){e.stopPropagation(),e.preventDefault();var i=v.length-1,a=(0,c.LX)({path:r.path},t.pathname);if(a){var o,l=!1;i>n&&a?(o=v.find((function(e,t){return t===n+1})),l=!0):i===n&&n>0&&a?(o=v.find((function(e,t){return t===n-1})),l=!0):a&&(l=!0),l&&x((function(e){return e.filter((function(e,t){return t!==n}))})),o&&f(""+o.path+o.location.search,{state:o.location.state,replace:!0})}else x((function(e){return e.filter((function(e,t){return t!==n}))}))}(r,n,e)}}):(0,h.jsx)(o.Fragment,{})]})},e.location.pathname)}))}),(0,h.jsx)("div",{className:"uiw-layout-tabs-body",children:(0,h.jsx)(u.j3,{})})]})}}}]);
//# sourceMappingURL=829.ddbc67f2.chunk.js.map