"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8147],{48034:function(e,n,t){t.d(n,{Z:function(){return W},J:function(){return _}});var r=t(96234),i=t(56976),a=t(44103),o=t(41546),u=t(43763),s=t.n(u),l=t(35553),c=t(41744),d=t(51462),h=(t(42729),(0,t(8132).S1)({})),f=(h.dispatch,h.addModel,h),p=(f.dispatch,f.addModel,t(80019)),m=t(32463),v=t(14218);t(15228),(0,p.lX)();var g=t(9249),x=t(87371),j=t(43945),y=["element","component","children","path"],M=["routes"];function b(e){void 0===e&&(e=[]);var n=[];return e.forEach((function(e){var t=(0,c.Z)({},e);if(e.routes){var r=b(t.routes);t.routes=r}if(e.path&&"*"!==e.path){var i=t.path,a=(0,j.Z)(t,y);n.push((0,c.Z)({},a,{path:i,key:i}))}})),n}var S=function e(n,t){return void 0===n&&(n=[]),void 0===t&&(t=[]),n.forEach((function(n){n.routes?(e(n.routes,t),n.side&&t.push(n)):t.push(n)})),t},k=function e(n,t){return void 0===n&&(n=[]),void 0===t&&(t=[]),n.forEach((function(n){var r=n.routes,i=(0,j.Z)(n,M);Array.isArray(r)&&e(r,t),t.push(i)})),t},C=function(){function e(n){(0,g.Z)(this,e),this.breadcrumb=new Map([]),this.flat=[],this.init(n)}return(0,x.Z)(e,[{key:"init",value:function(e,n){var t=this;e.forEach((function(e){var r=(n||[]).concat([e]);e.routes&&t.init(e.routes,r),e.path&&"*"!==e.path&&t.breadcrumb.set(e.path,r),t.flat.push(e)}))}}]),e}(),w=i.createContext({headerLayout:"top",headerBackground:"#fff",headerFontColor:"#000"}),F=function(){return i.useContext(w)},Z=function(e){var n=e.routeData,t=(0,d.TH)(),r=i.useMemo((function(){return function(e){var n=new Map([]),t=new Map([]),r=new Map([]);return function e(i,a){i.forEach((function(i){var o=i.path,u=i.side,s=i.routes;Array.isArray(s)&&e(s,u?o:a),u&&o&&s&&n.set(o,s),o&&(u?t.set(o,o):a&&t.set(o,a),r.set(o,a||"/"))}))}(e),{sideMenus:n,flat:t,flatSide:r}}(n)}),[JSON.stringify(n)]),a=function(e,n){var t=e.find((function(e){return e.path===n}));return t||(e.find((function(e){return e.path&&"*"!==e.path&&(0,d.LX)({path:e.path},n)}))||void 0)}(i.useMemo((function(){return k(n)}),[JSON.stringify(n)]),t.pathname),o=null==a?void 0:a.hiddenMainMenu,u=i.useMemo((function(){var e=r.flat.get((null==a?void 0:a.path)||"");return e&&"/"!==e?{routeData:r.sideMenus.get(e)||[],parentPath:e}:{routeData:n,parentPath:e}}),[JSON.stringify({currentPath:a,routeData:n,sideMenusMap:r})]);return{sideItemIndex:i.useMemo((function(){if(a&&a.side){var e=u.routeData.find((function(e){return e.index}));if(e)return e}}),[t.pathname,JSON.stringify(a)]),ChildMenus:u,sideMenusMap:r,hiddenMainMenu:o}},I=function(e){void 0===e&&(e={});var n=F(),t=n.headerFontColor,r=n.headerLayout,a=(0,i.useMemo)((function(){return e.logo&&(0,v.jsx)("img",{src:e.logo,alt:e.projectName||"logo"})}),[e.logo]),o=(0,i.useMemo)((function(){return e.projectName&&(0,v.jsx)("h1",{style:"top"===r?{color:t}:{},children:e.projectName})}),[e.projectName,t]),u=(0,i.useMemo)((function(){var n=e.onLogoClick;return n&&"function"===typeof n?{onClick:function(e){n(e),e.stopPropagation(),e.preventDefault()}}:{}}),[e.onLogoClick]);return(0,i.useMemo)((function(){return(0,v.jsx)("div",{className:"default"===r?"uiw-admin-global-title":"uiw-admin-global-title-top",children:(0,v.jsxs)(d.rU,(0,c.Z)({to:"/"},u,{style:e.collapsed?{justifyContent:"center"}:{},children:[a,!e.collapsed&&o]}))})}),[e.collapsed])},R=t(5596),N=t(90800),E=t(56247),L=t.n(E),A=function(e,n,t){if(!(e&&Reflect.has(e,"navigate")&&e.navigate))return!0;if("function"!==typeof e.navigate){var r=new Function("return "+e.navigate)();"function"===typeof r&&r(n,t)}else e.navigate(n,t)};function P(e,n,t,r,a,o){return void 0===e&&(e=[]),e.map((function(e,u){var l={key:u,icon:e.icon},d=!0;return Reflect.has(e,"isAuth")&&(d=Reflect.get(e,"isAuth")),e.index&&e.redirect||e.hideInMenu||e.hiddenMainMenu||!d||"*"===e.path?(0,v.jsx)(i.Fragment,{},u):(o&&(l.className=s()({"uiw-admin-global-sider-menu-collapsed":n})),(0,N.LX)({path:e.path},t)&&(l.active=!0),e.routes&&!e.side?(n&&(l.overlayProps={isOutside:!0,usePortal:!0}),e.routes.find((function(e){return e.path===t}))&&(l.overlayProps={isOpen:!0}),(0,v.jsx)(R.ZP.SubMenu,(0,c.Z)({},l,{text:e.name||"-",collapse:n,children:P(e.routes,n,t,r,a)}))):(0,v.jsx)(R.ZP.Item,(0,c.Z)({},l,{onClick:function(){A(e,r,a)&&r(e.path,{replace:!0})},text:e.name||"-"})))}))}var O=function(e){var n=(e||{}).routes,t=void 0===n?[]:n,a=(0,N.TH)(),o=(0,N.s0)(),u=i.useMemo((function(){return S(t)}),[t]),s=i.useMemo((function(){return u.filter((function(e){return e&&"name"in e&&!e.hideInMenu&&!e.hiddenMainMenu&&!e.index&&!e.redirect&&"*"!==e.path})).map((function(e){var n=L()(e.name||"",{style:L().STYLE_FIRST_LETTER}),t=L()(e.name||"",{style:L().STYLE_NORMAL}),r="",i="";return Array.isArray(t)&&(i=t.join("")),Array.isArray(n)&&(r=n.join("")),{label:e.name,value:e.path,py:i,pyInitials:r}}))}),[u]),l=i.useState(s),c=(0,r.Z)(l,2),d=c[0],h=c[1];return(0,v.jsx)("div",{style:{marginBottom:10,padding:"0px 10px"},children:(0,v.jsx)(m.ul,{placeholder:"\u8bf7\u8f93\u5165",mode:"single",labelInValue:!0,showSearch:!0,option:d,onSearch:function(e){if(e){var n=s.filter((function(n){var t=new RegExp(""+e);return!!(t.test(n.label)||t.test(n.py)||t.test(n.pyInitials))}));h(n)}else h(s)},onChange:function(e){if(Array.isArray(e)){var n=(0,r.Z)(e,1)[0];if(n&&"object"===typeof n&&n.value){var t=u.find((function(e){return e.path===n.value}));if(!A(t,o,{location:a}))return;o(t.path,{replace:!0})}}}})})},T=function(e){void 0===e&&(e={});var n=e,t=n.routes,r=void 0===t?[]:t,a=n.collapsed,o=n.allRoutes,u=(0,N.TH)(),s=(0,N.s0)(),l=u.pathname,c=SEARCH_MENU&&a||(SEARCH_MENU?(0,v.jsx)(O,{routes:o}):(0,v.jsx)(v.Fragment,{}));return(0,v.jsxs)(i.Fragment,{children:[c,(0,v.jsx)(R.ZP,{theme:"dark",inlineCollapsed:!!a,style:{padding:"0 12px"},children:P(r,!!a,l,s,{location:u},!0)})]})},z=function(e){var n=e.routeMap,t=e.sideMenusMap,r=(0,N.s0)(),a=(0,N.TH)(),o=i.useMemo((function(){var e,t=n.breadcrumb.get(a.pathname);return t||(n.breadcrumb.forEach((function(n,t){(0,N.LX)(t,a.pathname)&&(e=t)})),e&&n.breadcrumb.get(e)||[])}),[a.pathname]);return(0,v.jsx)(m.aG,{className:"uiw-admin-breadcrumb",children:null==o?void 0:o.map((function(e,n){return(0,v.jsx)(m.aG.Item,{onClick:function(){if(e.side&&e.path){var n=t.flatSide.get(e.path);if(n){if(!A(e,r,{location:a}))return;r(n,{replace:!0})}}},children:e.name},n)}))})},J=function(e){return(0,v.jsx)("div",{style:{height:"100%",overflow:"auto"},children:e.children})},D=function(e){var n=e.sideItemIndex,t=(0,d.TH)(),r=(0,d.s0)();if(n&&n.index&&n.path&&"*"!==n.path&&"/"!==n.path){if(n.navigate)if(!A(n,r,{location:t}))return(0,v.jsx)(i.Fragment,{});return(0,v.jsx)(i.Fragment,{children:(0,v.jsx)(d.Fg,{to:n.path,replace:!0})})}return(0,v.jsx)(i.Fragment,{children:e.children})},B=t(68079),H=["title","icon","onClick","divider","render"];function q(e){var n=e.menus,t=void 0===n?[]:n,r=e.profile,a=void 0===r?{}:r,o=e.onReloadAuth,u=e.layouts,s=e.hideReloadButton,l=e.hideLogoutButton,d=e.hideUserInfo,h=e.onLogout,f=u||{},p=f.headerRightvisible,g=f.updateStore,x=(0,N.s0)(),y=[].concat((0,B.Z)(d?[]:[{title:(0,v.jsxs)("span",{style:{fontSize:15},children:["\u8d26\u53f7 ",(null==a?void 0:a.userName)||"admin"]}),icon:"user"},{divider:!0}]),(0,B.Z)(t),[{title:"\u5237\u65b0\u6743\u9650",icon:"reload",onClick:function(){return o()},style:{display:s?"none":""}},{title:"\u9000\u51fa\u767b\u5f55",icon:"logout",style:{display:l?"none":""},onClick:function(){h?h(x):(x("/login",{replace:!0}),sessionStorage.removeItem("token"),sessionStorage.removeItem("auth"),localStorage.removeItem("token"),localStorage.removeItem("auth"))}}]),M=(0,v.jsx)("div",{style:{width:150},children:(0,v.jsx)(m.v2,{children:y.map((function(e,n){var t=e.title,r=e.icon,a=e.onClick,o=e.divider,u=e.render,s=(0,j.Z)(e,H);return o?(0,v.jsx)(m.v2.Divider,{},n):u?(0,v.jsx)(i.Fragment,{children:u},n):(0,v.jsx)(m.v2.Item,(0,c.Z)({text:t,icon:r},s,{onClick:a&&a}),n)}))})});return(0,v.jsx)("div",{className:"uiw-global-header-menu",children:(0,v.jsx)("span",{className:"uiw-global-header-menu",children:(0,v.jsx)(m.J2,{isOpen:!!p,onVisibleChange:function(e){return null==g?void 0:g({headerRightvisible:e})},trigger:"click",placement:"bottomRight",content:M,children:null!=a&&a.avatar?(0,v.jsx)("img",{src:a.avatar}):(0,v.jsx)(m.qE,{icon:"user",size:"default"})})})})}function U(){var e=document;return e.mozFullScreen||e.webkitIsFullScreen||e.webkitFullScreen||e.msFullScreen}var X=function(){if(!function(){var e=document;return e.fullscreenEnabled||e.mozFullScreenEnabled||e.webkitFullscreenEnabled||e.msFullscreenEnabled}())return null;var e=(0,i.useState)(!1),n=(0,r.Z)(e,2),t=n[0],a=n[1];if(t){var o=document.documentElement;o.requestFullscreen?o.requestFullscreen():o.webkitRequestFullScreen?o.webkitRequestFullScreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.msRequestFullscreen&&o.msRequestFullscreen()}else if(U()){var u=document;u.exitFullscreen?u.exitFullscreen():u.webkitCancelFullScreen?u.webkitCancelFullScreen():u.mozCancelFullScreen?u.mozCancelFullScreen():u.msExitFullscreen&&u.msExitFullscreen()}var s=F().headerFontColor,l=function(){!U()&&t&&a(!1)};return(0,i.useEffect)((function(){return window.addEventListener("resize",l),function(){window.removeEventListener("resize",l,!1)}})),(0,i.useMemo)((function(){return(0,v.jsx)("span",{onClick:function(){return a(!t)},style:{fontSize:18,marginRight:15,cursor:"pointer"},children:(0,v.jsx)(m.JO,{type:t?"shrink":"arrows-alt",color:s})})}),[t])},_=function(){var e=(0,i.useState)({headerRightvisible:!1}),n=(0,r.Z)(e,2),t=n[0],a=n[1],o=function(e){a((0,c.Z)({},t,e))};return(0,c.Z)({closeMenu:function(){return o({headerRightvisible:!1})},updateStore:o},t)},G=a.ZP.Header,Q=a.ZP.Sider,V=a.ZP.Content;var W=function(e){var n=e||{},t=n.routes,u=void 0===t?[]:t,c=n.projectName,d=void 0===c?"UIW Admin":c,h=n.profile,f=void 0===h?{}:h,p=n.menus,g=void 0===p?[]:p,x=n.onReloadAuth,j=n.layouts,y=n.headerLayout,M=void 0===y?"default":y,S=n.headerBackground,k=void 0===S?"#fff":S,F=n.headerFontColor,R=void 0===F?"#000":F,N=n.isDefaultContentStyle,E=void 0===N||N,L=n.hideReloadButton,A=n.hideLogoutButton,P=n.hideUserInfo,O=n.onLogoClick,B=e.menuHide,H=(0,i.useState)(!1),U=(0,r.Z)(H,2),_=U[0],W=U[1],Y=b(u),K=Z({routeData:Y}),$=K.sideItemIndex,ee=K.ChildMenus,ne=K.sideMenusMap;B=K.hiddenMainMenu;var te=i.useMemo((function(){return(0,v.jsx)(T,{collapsed:_,routes:ee.routeData,allRoutes:Y})}),[JSON.stringify(ee),_]),re=i.useMemo((function(){return new C(Y)}),[JSON.stringify(Y)]),ie=(0,i.useMemo)((function(){return(0,v.jsxs)("div",{style:{display:"flex",justifyItems:"center",alignItems:"center"},children:[null==f?void 0:f.menuLeft,(0,v.jsx)(X,{}),(0,v.jsx)(q,{onReloadAuth:x,profile:f,menus:g,layouts:j,hideReloadButton:L,hideLogoutButton:A,hideUserInfo:P})]})}),[f,g,JSON.stringify(j)]),ae=(0,v.jsxs)(G,{className:"uiw-admin-global-header",style:{background:k,color:R},children:[(0,v.jsxs)("div",{style:{display:"flex"},children:["top"===M&&(0,v.jsx)("div",{style:{minWidth:200},children:(0,v.jsx)(I,{onLogoClick:O,collapsed:!1,projectName:d,logo:e.logo})}),!B&&(0,v.jsxs)("div",{children:[(0,v.jsx)(o.Z,{basic:!0,icon:(0,v.jsx)(m.JO,{type:_?"menu-unfold":"menu-fold",color:R}),style:{fontSize:12,marginRight:20},onClick:function(){return W(!_)}}),(0,v.jsx)(z,{sideMenusMap:ne,routeMap:re})]})]}),ie]});return(0,v.jsx)(i.Fragment,{children:(0,v.jsxs)(w.Provider,{value:{headerLayout:M,headerBackground:k,headerFontColor:R},children:[(0,v.jsx)(l.Z,{title:d||""}),(0,v.jsxs)(a.ZP,{style:{height:"100%"},children:["top"===M&&ae,(0,v.jsxs)(a.ZP,{children:[!B&&(0,v.jsxs)(Q,{collapsed:_,className:s()("uiw-admin-global-sider-menu",{}),children:["default"===M?(0,v.jsx)(I,{onLogoClick:O,collapsed:_,projectName:d,logo:e.logo}):(0,v.jsx)("div",{style:{marginTop:10}}),te]}),(0,v.jsxs)(a.ZP,{children:["default"===M&&ae,E?(0,v.jsx)(V,{className:"uiw-admin-global-content",children:(0,v.jsx)(D,{sideItemIndex:$,children:(0,v.jsx)(J,{children:e.children})})}):(0,v.jsx)(D,{sideItemIndex:$,children:e.children})]})]})]})]})})}},90640:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(68079),i=t(96234),a=t(89651),o=t(56976),u=t(32463),s=t(90800),l=function e(n,t){return void 0===n&&(n=[]),void 0===t&&(t=[]),n.forEach((function(n){n.routes?e(n.routes,t):t.push(n)})),t},c=function(e,n){return e.find((function(e){return"/"===n.pathname&&e.index&&e.redirect?e.index:!!(n&&n.pathname&&e.path&&"/"!==n.pathname)&&n.pathname===e.path}))},d=function(e,n){return e.find((function(e){return"/"===n.pathname&&e.index&&e.redirect?e.index:!!(n&&n.pathname&&e.path&&"/"!==n.pathname)&&(0,s.LX)({path:e.path},n.pathname)}))},h=t(14218),f=function(e){var n=e.routes,t=(0,s.TH)(),f=(0,s.s0)(),p=o.useState([]),m=(0,i.Z)(p,2),v=m[0],g=m[1],x=function(e,n){var t=c(e,n);if(t)return{current:t,isMatch:!1};var r=d(e,n);return{current:r,isMatch:!!r}}(o.useMemo((function(){return l(n)}),[n]),t);o.useEffect((function(){if(x.current)if(x.current&&x.current.redirect)f(x.current.redirect);else{var e=function(e,n,t){return t?d(e,n):c(e,n)}(v,t,x.isMatch);e?e&&x.isMatch&&(e.location.pathname!==t.pathname||e.location.search!==t.search)&&g((function(n){return n.map((function(n){return e.location.pathname===n.location.pathname?(0,a.Z)({},n,{location:t}):n}))})):g((function(e){return e.concat([(0,a.Z)({},x.current,{isMatch:x.isMatch,location:t})]).filter((function(e){return!!e}))}))}else f("/404")}),[t.pathname]),o.useMemo((function(){var e=(0,r.Z)(v).map((function(e){return e.location.pathname===t.pathname&&t.search!==e.location.search&&(e.location=t),e}));g((function(){return(0,r.Z)(e)}))}),[t.search]);return(0,h.jsxs)("div",{className:"uiw-layout-tabs-warp",children:[(0,h.jsx)(u.mQ,{type:"card",activeKey:t.pathname,onTabClick:function(e){var n=v.find((function(n){return n.location.pathname===e}));n&&t.pathname!==e&&f(""+e+n.location.search,{state:n.location.state,replace:!0})},children:v.map((function(e,n){return(0,h.jsx)(u.mQ.Pane,{label:(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.name,v.length>1?(0,h.jsx)(u.JO,{type:"close",tagName:"span",style:{marginLeft:10},onClick:function(r){return function(e,n,r){e.stopPropagation(),e.preventDefault();var i=v.length-1,a=(0,s.LX)({path:r.path},t.pathname);if(a){var o,u=!1;i>n&&a?(o=v.find((function(e,t){return t===n+1})),u=!0):i===n&&n>0&&a?(o=v.find((function(e,t){return t===n-1})),u=!0):a&&(u=!0),u&&g((function(e){return e.filter((function(e,t){return t!==n}))})),o&&f(""+o.path+o.location.search,{state:o.location.state,replace:!0})}else g((function(e){return e.filter((function(e,t){return t!==n}))}))}(r,n,e)}}):(0,h.jsx)(o.Fragment,{})]})},e.location.pathname)}))}),(0,h.jsx)("div",{className:"uiw-layout-tabs-body",children:v.map((function(e){var n=e.location.pathname===t.pathname;return(0,h.jsx)("div",{style:{display:n?"block":"none",overflow:"auto"},children:e.element},e.location.pathname)}))})]})}}}]);
//# sourceMappingURL=8147.de6167a8.chunk.js.map