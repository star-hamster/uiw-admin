"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8147],{48034:function(e,n,t){t.d(n,{Z:function(){return Y},J:function(){return _}});var r=t(96234),i=t(41744),a=t(43945),o=t(56976),u=t(44103),l=t(41546),s=t(43763),c=t.n(s),d=t(35553),h=t(68589),f=(t(42729),(0,t(8132).S1)({})),p=(f.dispatch,f.addModel,f),m=(p.dispatch,p.addModel,t(80019)),v=t(32463),g=t(14218);t(15228),(0,m.lX)();var x=t(9249),j=t(87371),y=["element","component","children","path"],M=["routes"];function b(e){void 0===e&&(e=[]);var n=[];return e.forEach((function(e){var t=(0,i.Z)({},e);if(e.routes){var r=b(t.routes);t.routes=r}if(e.path&&"*"!==e.path){var o=t.path,u=(0,a.Z)(t,y);n.push((0,i.Z)({},u,{path:o,key:o}))}})),n}var S=function e(n,t){return void 0===n&&(n=[]),void 0===t&&(t=[]),n.forEach((function(n){n.routes?(e(n.routes,t),n.side&&t.push(n)):t.push(n)})),t},C=function e(n,t){return void 0===n&&(n=[]),void 0===t&&(t=[]),n.forEach((function(n){var r=n.routes,i=(0,a.Z)(n,M);Array.isArray(r)&&e(r,t),t.push(i)})),t},k=function(){function e(n){(0,x.Z)(this,e),this.breadcrumb=new Map([]),this.flat=[],this.init(n)}return(0,j.Z)(e,[{key:"init",value:function(e,n){var t=this;e.forEach((function(e){var r=(n||[]).concat([e]);e.routes&&t.init(e.routes,r),e.path&&"*"!==e.path&&t.breadcrumb.set(e.path,r),t.flat.push(e)}))}}]),e}(),F=o.createContext({headerLayout:"top",headerBackground:"#fff",headerFontColor:"#000"}),Z=function(){return o.useContext(F)},w=function(e){var n=e.routeData,t=(0,h.TH)(),r=o.useMemo((function(){return function(e){var n=new Map([]),t=new Map([]),r=new Map([]);return function e(i,a){i.forEach((function(i){var o=i.path,u=i.side,l=i.routes;Array.isArray(l)&&e(l,u?o:a),u&&o&&l&&n.set(o,l),o&&(u?t.set(o,o):a&&t.set(o,a),r.set(o,a||"/"))}))}(e),{sideMenus:n,flat:t,flatSide:r}}(n)}),[JSON.stringify(n)]),i=function(e,n){var t=e.find((function(e){return e.path===n}));return t||(e.find((function(e){return e.path&&"*"!==e.path&&(0,h.LX)({path:e.path},n)}))||void 0)}(o.useMemo((function(){return C(n)}),[JSON.stringify(n)]),t.pathname),a=null==i?void 0:i.hiddenMainMenu,u=o.useMemo((function(){var e=r.flat.get((null==i?void 0:i.path)||"");return e&&"/"!==e?{routeData:r.sideMenus.get(e)||[],parentPath:e}:{routeData:n,parentPath:e}}),[JSON.stringify({currentPath:i,routeData:n,sideMenusMap:r})]);return{sideItemIndex:o.useMemo((function(){if(i&&i.side){var e=u.routeData.find((function(e){return e.index}));if(e)return e}}),[t.pathname,JSON.stringify(i)]),ChildMenus:u,sideMenusMap:r,hiddenMainMenu:a}},N=function(e){void 0===e&&(e={});var n=Z(),t=n.headerFontColor,r=n.headerLayout,a=(0,o.useMemo)((function(){return e.logo&&(0,g.jsx)("img",{src:e.logo,alt:e.projectName||"logo"})}),[e.logo]),u=(0,o.useMemo)((function(){return e.projectName&&(0,g.jsx)("h1",{style:"top"===r?{color:t}:{},children:e.projectName})}),[e.projectName,t]),l=(0,o.useMemo)((function(){var n=e.onLogoClick;return n&&"function"===typeof n?{onClick:function(e){n(e),e.stopPropagation(),e.preventDefault()}}:{}}),[e.onLogoClick]);return(0,o.useMemo)((function(){return(0,g.jsx)("div",{className:"default"===r?"uiw-admin-global-title":"uiw-admin-global-title-top",children:(0,g.jsxs)(h.rU,(0,i.Z)({to:"/"},l,{style:e.collapsed?{justifyContent:"center"}:{},children:[a,!e.collapsed&&u]}))})}),[e.collapsed])},I=t(5596),R=t(90800),L=t(56247),E=t.n(L),A=function(e,n,t){if(!(e&&Reflect.has(e,"navigate")&&e.navigate))return!0;if("function"!==typeof e.navigate){var r=new Function("return "+e.navigate)();"function"===typeof r&&r(n,t)}else e.navigate(n,t)};function P(e,n,t,r,a,u){return void 0===e&&(e=[]),e.map((function(e,l){var s={key:l,icon:e.icon},d=!0;return Reflect.has(e,"isAuth")&&(d=Reflect.get(e,"isAuth")),e.index&&e.redirect||e.hideInMenu||e.hiddenMainMenu||!d||"*"===e.path?(0,g.jsx)(o.Fragment,{},l):(u&&(s.className=c()({"uiw-admin-global-sider-menu-collapsed":n})),(0,R.LX)({path:e.path},t)&&(s.active=!0),e.routes&&!e.side?(n&&(s.overlayProps={isOutside:!0,usePortal:!0}),e.routes.find((function(e){return e.path===t}))&&(s.overlayProps={isOpen:!0}),(0,g.jsx)(I.ZP.SubMenu,(0,i.Z)({},s,{text:e.name||"-",collapse:n,children:P(e.routes,n,t,r,a)}))):(0,g.jsx)(I.ZP.Item,(0,i.Z)({},s,{onClick:function(){A(e,r,a)&&r(e.path,{replace:!0})},text:e.name||"-"})))}))}var B=function(e){var n=(e||{}).routes,t=void 0===n?[]:n,i=(0,R.TH)(),a=(0,R.s0)(),u=o.useMemo((function(){return S(t)}),[t]),l=o.useMemo((function(){return u.filter((function(e){return e&&"name"in e&&!e.hideInMenu&&!e.hiddenMainMenu&&!e.index&&!e.redirect&&"*"!==e.path})).map((function(e){var n=E()(e.name||"",{style:E().STYLE_FIRST_LETTER}),t=E()(e.name||"",{style:E().STYLE_NORMAL}),r="",i="";return Array.isArray(t)&&(i=t.join("")),Array.isArray(n)&&(r=n.join("")),{label:e.name,value:e.path,py:i,pyInitials:r}}))}),[u]),s=o.useState(l),c=(0,r.Z)(s,2),d=c[0],h=c[1];return(0,g.jsx)("div",{style:{marginBottom:10,padding:"0px 10px"},children:(0,g.jsx)(v.ul,{placeholder:"\u8bf7\u8f93\u5165",mode:"single",labelInValue:!0,showSearch:!0,option:d,onSearch:function(e){if(e){var n=l.filter((function(n){var t=new RegExp(""+e);return!!(t.test(n.label)||t.test(n.py)||t.test(n.pyInitials))}));h(n)}else h(l)},onChange:function(e){if(Array.isArray(e)){var n=(0,r.Z)(e,1)[0];if(n&&"object"===typeof n&&n.value){var t=u.find((function(e){return e.path===n.value}));if(!A(t,a,{location:i}))return;a(t.path,{replace:!0})}}}})})},O=function(e){void 0===e&&(e={});var n=e,t=n.routes,r=void 0===t?[]:t,i=n.collapsed,a=n.allRoutes,u=(0,R.TH)(),l=(0,R.s0)(),s=u.pathname,c=SEARCH_MENU&&i||(SEARCH_MENU?(0,g.jsx)(B,{routes:a}):(0,g.jsx)(g.Fragment,{}));return(0,g.jsxs)(o.Fragment,{children:[c,(0,g.jsx)(I.ZP,{theme:"dark",inlineCollapsed:!!i,style:{padding:"0 12px"},children:P(r,!!i,s,l,{location:u},!0)})]})},T=function(e){var n=e.routeMap,t=e.sideMenusMap,r=(0,R.s0)(),i=(0,R.TH)(),a=o.useMemo((function(){var e,t=n.breadcrumb.get(i.pathname);return t||(n.breadcrumb.forEach((function(n,t){(0,R.LX)(t,i.pathname)&&(e=t)})),e&&n.breadcrumb.get(e)||[])}),[i.pathname]);return(0,g.jsx)(v.aG,{className:"uiw-admin-breadcrumb",children:null==a?void 0:a.map((function(e,n){return(0,g.jsx)(v.aG.Item,{onClick:function(){if(e.side&&e.path){var n=t.flatSide.get(e.path);if(n){if(!A(e,r,{location:i}))return;r(n,{replace:!0})}}else if(e.path){var a;if(e&&null!=e&&e.routes&&(null==e||null==(a=e.routes)?void 0:a.length)>0){var o=e.routes[0].path;o&&r(o,{replace:!0})}}},children:e.name},n)}))})},z=function(e){return(0,g.jsx)("div",{style:{height:"100%",overflow:"auto"},children:e.children})},D=function(e){var n=e.sideItemIndex,t=(0,h.TH)(),r=(0,h.s0)();if(n&&n.index&&n.path&&"*"!==n.path&&"/"!==n.path){if(n.navigate)if(!A(n,r,{location:t}))return(0,g.jsx)(o.Fragment,{});return(0,g.jsx)(o.Fragment,{children:(0,g.jsx)(h.Fg,{to:n.path,replace:!0})})}return(0,g.jsx)(o.Fragment,{children:e.children})},J=t(68079),H=["title","icon","onClick","divider","render"];function q(e){var n=e.menus,t=void 0===n?[]:n,r=e.profile,u=void 0===r?{}:r,l=e.onReloadAuth,s=e.layouts,c=e.hideReloadButton,d=e.hideLogoutButton,h=e.hideUserInfo,f=e.onLogout,p=s||{},m=p.headerRightvisible,x=p.updateStore,j=(0,R.s0)(),y=[].concat((0,J.Z)(h?[]:[{title:(0,g.jsxs)("span",{style:{fontSize:15},children:["\u8d26\u53f7 ",(null==u?void 0:u.userName)||"admin"]}),icon:"user"},{divider:!0}]),(0,J.Z)(t),[{title:"\u5237\u65b0\u6743\u9650",icon:"reload",onClick:function(){return l()},style:{display:c?"none":""}},{title:"\u9000\u51fa\u767b\u5f55",icon:"logout",style:{display:d?"none":""},onClick:function(){f?f(j):(j("/login",{replace:!0}),sessionStorage.removeItem("token"),sessionStorage.removeItem("auth"),localStorage.removeItem("token"),localStorage.removeItem("auth"))}}]),M=(0,g.jsx)("div",{style:{width:150},children:(0,g.jsx)(v.v2,{children:y.map((function(e,n){var t=e.title,r=e.icon,u=e.onClick,l=e.divider,s=e.render,c=(0,a.Z)(e,H);return l?(0,g.jsx)(v.v2.Divider,{},n):s?(0,g.jsx)(o.Fragment,{children:s},n):(0,g.jsx)(v.v2.Item,(0,i.Z)({text:t,icon:r},c,{onClick:u&&u}),n)}))})}),b=(0,o.useMemo)((function(){var e=null==u?void 0:u.avatar,n=null==u?void 0:u.userName,t=n?n.trim().split("")[0]:"";return e?(0,g.jsx)("img",{src:e,alt:t}):n?(0,g.jsx)("div",{className:"avatar",children:t}):(0,g.jsx)(v.qE,{icon:"user",size:"default"})}),[null==u?void 0:u.avatar,null==u?void 0:u.userName]);return(0,g.jsx)("div",{className:"uiw-global-header-menu",children:(0,g.jsx)("span",{className:"uiw-global-header-menu",children:(0,g.jsx)(v.J2,{isOpen:!!m,onVisibleChange:function(e){return null==x?void 0:x({headerRightvisible:e})},trigger:"click",placement:"bottomRight",content:M,children:b})})})}function U(){var e=document;return e.mozFullScreen||e.webkitIsFullScreen||e.webkitFullScreen||e.msFullScreen}var X=function(){if(!function(){var e=document;return e.fullscreenEnabled||e.mozFullScreenEnabled||e.webkitFullscreenEnabled||e.msFullscreenEnabled}())return null;var e=(0,o.useState)(!1),n=(0,r.Z)(e,2),t=n[0],i=n[1];if(t){var a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen&&a.msRequestFullscreen()}else if(U()){var u=document;u.exitFullscreen?u.exitFullscreen():u.webkitCancelFullScreen?u.webkitCancelFullScreen():u.mozCancelFullScreen?u.mozCancelFullScreen():u.msExitFullscreen&&u.msExitFullscreen()}var l=Z().headerFontColor,s=function(){!U()&&t&&i(!1)};return(0,o.useEffect)((function(){return window.addEventListener("resize",s),function(){window.removeEventListener("resize",s,!1)}})),(0,o.useMemo)((function(){return(0,g.jsx)("span",{onClick:function(){return i(!t)},style:{fontSize:18,marginRight:15,cursor:"pointer"},children:(0,g.jsx)(v.JO,{type:t?"shrink":"arrows-alt",color:l})})}),[t])},_=function(){var e=(0,o.useState)({headerRightvisible:!1}),n=(0,r.Z)(e,2),t=n[0],a=n[1],u=function(e){a((0,i.Z)({},t,e))};return(0,i.Z)({closeMenu:function(){return u({headerRightvisible:!1})},updateStore:u},t)},G=["className","routes","projectName","profile","menus","onReloadAuth","layouts","headerLayout","headerBackground","headerFontColor","isDefaultContentStyle","hideReloadButton","hideLogoutButton","hideUserInfo","onLogoClick"],Q=u.ZP.Header,V=u.ZP.Sider,W=u.ZP.Content;var Y=function(e){var n=e||{},t=n.className,s=n.routes,h=void 0===s?[]:s,f=n.projectName,p=void 0===f?"UIW Admin":f,m=n.profile,x=void 0===m?{}:m,j=n.menus,y=void 0===j?[]:j,M=n.onReloadAuth,S=n.layouts,C=n.headerLayout,Z=void 0===C?"default":C,I=n.headerBackground,R=void 0===I?"#fff":I,L=n.headerFontColor,E=void 0===L?"#000":L,A=n.isDefaultContentStyle,P=void 0===A||A,B=n.hideReloadButton,J=n.hideLogoutButton,H=n.hideUserInfo,U=n.onLogoClick,_=(0,a.Z)(n,G),Y=e.menuHide,K=(0,o.useState)(!1),$=(0,r.Z)(K,2),ee=$[0],ne=$[1],te=b(h),re=w({routeData:te}),ie=re.sideItemIndex,ae=re.ChildMenus,oe=re.sideMenusMap;Y=re.hiddenMainMenu;var ue=o.useMemo((function(){return(0,g.jsx)(O,{collapsed:ee,routes:ae.routeData,allRoutes:te})}),[JSON.stringify(ae),ee]),le=o.useMemo((function(){return new k(te)}),[JSON.stringify(te)]),se=(0,o.useMemo)((function(){return(0,g.jsxs)("div",{style:{display:"flex",justifyItems:"center",alignItems:"center"},children:[null==x?void 0:x.menuLeft,(0,g.jsx)(X,{}),(0,g.jsx)(q,{onReloadAuth:M,profile:x,menus:y,layouts:S,hideReloadButton:B,hideLogoutButton:J,hideUserInfo:H})]})}),[x,y,JSON.stringify(S)]),ce=[t,"uiw-admin-global-header"].filter(Boolean).join(" ").trim(),de=(0,g.jsxs)(Q,(0,i.Z)({},_,{className:ce,style:(0,i.Z)({background:R,color:E},e.style),children:[(0,g.jsxs)("div",{style:{display:"flex"},children:["top"===Z&&(0,g.jsx)("div",{style:{minWidth:200},children:(0,g.jsx)(N,{onLogoClick:U,collapsed:!1,projectName:p,logo:e.logo})}),!Y&&(0,g.jsxs)("div",{children:[(0,g.jsx)(l.Z,{basic:!0,icon:(0,g.jsx)(v.JO,{type:ee?"menu-unfold":"menu-fold",color:E}),style:{fontSize:12,marginRight:20},onClick:function(){return ne(!ee)}}),(0,g.jsx)(T,{sideMenusMap:oe,routeMap:le})]})]}),se]}));return(0,g.jsx)(o.Fragment,{children:(0,g.jsxs)(F.Provider,{value:{headerLayout:Z,headerBackground:R,headerFontColor:E},children:[(0,g.jsx)(d.Z,{title:p||""}),(0,g.jsxs)(u.ZP,{style:{height:"100%"},children:["top"===Z&&de,(0,g.jsxs)(u.ZP,{children:[!Y&&(0,g.jsxs)(V,{collapsed:ee,className:c()("uiw-admin-global-sider-menu",{}),children:["default"===Z?(0,g.jsx)(N,{onLogoClick:U,collapsed:ee,projectName:p,logo:e.logo}):(0,g.jsx)("div",{style:{marginTop:10}}),ue]}),(0,g.jsxs)(u.ZP,{children:["default"===Z&&de,P?(0,g.jsx)(W,{className:"uiw-admin-global-content",children:(0,g.jsx)(D,{sideItemIndex:ie,children:(0,g.jsx)(z,{children:e.children})})}):(0,g.jsx)(D,{sideItemIndex:ie,children:e.children})]})]})]})]})})}},90640:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(68079),i=t(96234),a=t(89651),o=t(56976),u=t(32463),l=t(90800),s=function e(n,t){return void 0===n&&(n=[]),void 0===t&&(t=[]),n.forEach((function(n){n.routes?e(n.routes,t):t.push(n)})),t},c=function(e,n){return e.find((function(e){return"/"===n.pathname&&e.index&&e.redirect?e.index:!!(n&&n.pathname&&e.path&&"/"!==n.pathname)&&n.pathname===e.path}))},d=function(e,n){return e.find((function(e){return"/"===n.pathname&&e.index&&e.redirect?e.index:!!(n&&n.pathname&&e.path&&"/"!==n.pathname)&&(0,l.LX)({path:e.path},n.pathname)}))},h=t(14218),f=function(e){var n=e.routes,t=(0,l.TH)(),f=(0,l.s0)(),p=o.useState([]),m=(0,i.Z)(p,2),v=m[0],g=m[1],x=function(e,n){var t=c(e,n);if(t)return{current:t,isMatch:!1};var r=d(e,n);return{current:r,isMatch:!!r}}(o.useMemo((function(){return s(n)}),[n]),t);o.useEffect((function(){if(x.current)if(x.current&&x.current.redirect)f(x.current.redirect);else{var e=function(e,n,t){return t?d(e,n):c(e,n)}(v,t,x.isMatch);e?e&&x.isMatch&&(e.location.pathname!==t.pathname||e.location.search!==t.search)&&g((function(n){return n.map((function(n){return e.location.pathname===n.location.pathname?(0,a.Z)({},n,{location:t}):n}))})):g((function(e){return e.concat([(0,a.Z)({},x.current,{isMatch:x.isMatch,location:t})]).filter((function(e){return!!e}))}))}else f("/404")}),[t.pathname]),o.useMemo((function(){var e=(0,r.Z)(v).map((function(e){return e.location.pathname===t.pathname&&t.search!==e.location.search&&(e.location=t),e}));g((function(){return(0,r.Z)(e)}))}),[t.search]);return(0,h.jsxs)("div",{className:"uiw-layout-tabs-warp",children:[(0,h.jsx)(u.mQ,{type:"card",activeKey:t.pathname,onTabClick:function(e){var n=v.find((function(n){return n.location.pathname===e}));n&&t.pathname!==e&&f(""+e+n.location.search,{state:n.location.state,replace:!0})},children:v.map((function(e,n){return(0,h.jsx)(u.mQ.Pane,{label:(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.name,v.length>1?(0,h.jsx)(u.JO,{type:"close",tagName:"span",style:{marginLeft:10},onClick:function(r){return function(e,n,r){e.stopPropagation(),e.preventDefault();var i=v.length-1,a=(0,l.LX)({path:r.path},t.pathname);if(a){var o,u=!1;i>n&&a?(o=v.find((function(e,t){return t===n+1})),u=!0):i===n&&n>0&&a?(o=v.find((function(e,t){return t===n-1})),u=!0):a&&(u=!0),u&&g((function(e){return e.filter((function(e,t){return t!==n}))})),o&&f(""+o.path+o.location.search,{state:o.location.state,replace:!0})}else g((function(e){return e.filter((function(e,t){return t!==n}))}))}(r,n,e)}}):(0,h.jsx)(o.Fragment,{})]})},e.location.pathname)}))}),(0,h.jsx)("div",{className:"uiw-layout-tabs-body",children:v.map((function(e){var n=e.location.pathname===t.pathname;return(0,h.jsx)("div",{style:{display:n?"block":"none",overflow:"auto"},children:e.element},e.location.pathname)}))})]})}}}]);
//# sourceMappingURL=8147.65e05e77.chunk.js.map