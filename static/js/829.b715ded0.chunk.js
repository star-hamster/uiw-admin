"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[829],{1505:function(e,n,t){t.r(n),t.d(n,{default:function(){return _},useLayouts:function(){return O}});var i=t(6234),r=t(7896),a=t(1461),o=t(6976),u=t(8438),l=t(2963),c=t.n(l),s=t(5553),d=t(6416),h=t(6032),f=t(5596),p=t(9249),m=t(7371),v=["children"];var g=function e(n,t){return void 0===n&&(n=[]),void 0===t&&(t=[]),n.forEach((function(n){n.children?(e(n.children,t),n.side&&t.push(n)):t.push(n)})),t},x=function e(n,t){return void 0===n&&(n=[]),void 0===t&&(t=[]),n.forEach((function(n){var i=n.children,r=(0,a.Z)(n,v);Array.isArray(i)&&e(i,t),t.push(r)})),t},y=function(){function e(n){(0,p.Z)(this,e),this.breadcrumb=new Map([]),this.flat=[],this.init(n)}return(0,m.Z)(e,[{key:"init",value:function(e,n){var t=this;e.forEach((function(e){var i=(n||[]).concat([e]);e.children&&t.init(e.children,i),e.path&&"*"!==e.path&&t.breadcrumb.set(e.path,i),t.flat.push(e)}))}}]),e}(),j=t(6247),M=t.n(j),b=t(4218),S=function(e){var n=(e||{}).routes,t=void 0===n?[]:n,r=(0,d.useLocation)(),a=(0,d.useNavigate)(),l=o.useMemo((function(){return g(t)}),[t]),c=o.useMemo((function(){return l.filter((function(e){return e&&"name"in e&&!e.hideInMenu&&!e.hiddenMainMenu&&!e.index&&!e.redirect&&"*"!==e.path})).map((function(e){var n=M()(e.name||"",{style:M().STYLE_FIRST_LETTER}),t=M()(e.name||"",{style:M().STYLE_NORMAL}),i="",r="";return Array.isArray(t)&&(r=t.join("")),Array.isArray(n)&&(i=n.join("")),{label:e.name,value:e.path,py:r,pyInitials:i}}))}),[l]),s=o.useState(c),h=(0,i.Z)(s,2),f=h[0],p=h[1];return(0,b.jsx)("div",{style:{marginBottom:10,padding:"0px 10px"},children:(0,b.jsx)(u.SearchSelect,{placeholder:"\u8bf7\u8f93\u5165",mode:"single",labelInValue:!0,showSearch:!0,option:f,onSearch:function(e){if(e){var n=c.filter((function(n){var t=new RegExp(""+e);return!!(t.test(n.label)||t.test(n.py)||t.test(n.pyInitials))}));p(n)}else p(c)},onChange:function(e){if(Array.isArray(e)){var n=(0,i.Z)(e,1)[0];if(n&&"object"===typeof n&&n.value){var t=l.find((function(e){return e.path===n.value}));if(!C(t,a,{location:r}))return;a(t.path,{replace:!0})}}},className:"uiw-admin-search"})})},C=function(e,n,t){if(!(e&&Reflect.has(e,"navigate")&&e.navigate))return!0;if("function"!==typeof e.navigate){var i=new Function("return "+e.navigate)();"function"===typeof i&&i(n,t)}else e.navigate(n,t)};function k(e,n,t,i,a,l){return void 0===e&&(e=[]),e.map((function(e,s){var d={key:s,icon:e.icon?(0,b.jsx)(u.Icon,{type:e.icon}):void 0},p=!0;return Reflect.has(e,"isAuth")&&(p=Reflect.get(e,"isAuth")),e.index&&e.redirect||e.hideInMenu||e.hiddenMainMenu||!p||"*"===e.path?(0,b.jsx)(o.Fragment,{},s):(l&&(d.className=c()({"uiw-admin-global-sider-menu-collapsed":n})),(0,h.LX)({path:e.path},t)&&(d.active=!0),e.children&&!e.side?(n&&(d.overlayProps={isOutside:!0,usePortal:!0}),e.children.find((function(e){return e.path===t}))&&!n&&(d.overlayProps={isOpen:!0}),(0,b.jsx)(f.ZP.SubMenu,(0,r.Z)({},d,{text:e.name||"-",collapse:n,children:k(e.children,n,t,i,a)}))):(0,b.jsx)(f.ZP.Item,(0,r.Z)({},d,{onClick:function(){if(C(e,i,a))if(e.children&&e.children.length>0){var n=e.children.filter((function(e){return e.redirect}));i(n[0].redirect,{replace:!0})}else i(e.path,{replace:!0})},text:e.name||"-"})))}))}var w=function(e){void 0===e&&(e={});var n=e,t=n.routes,i=void 0===t?[]:t,r=n.collapsed,a=n.allRoutes,u=(0,d.useLocation)(),l=(0,d.useNavigate)(),c=u.pathname,s=r||(0,b.jsx)(S,{routes:a});return(0,b.jsxs)(o.Fragment,{children:[s,(0,b.jsx)(f.ZP,{theme:"dark",inlineCollapsed:!!r,style:{padding:"0 12px"},children:k(i,!!r,c,l,{location:u},!0)})]})},L=function(e){var n=e.routeMap,t=e.sideMenusMap,i=(0,d.useNavigate)(),r=(0,d.useLocation)(),a=o.useMemo((function(){var e,t=n.breadcrumb.get(r.pathname);return t||(n.breadcrumb.forEach((function(n,t){(0,h.LX)(t,r.pathname)&&(e=t)})),e&&n.breadcrumb.get(e)||[])}),[r.pathname]);return(0,b.jsx)(u.Breadcrumb,{className:"uiw-admin-breadcrumb",children:null==a?void 0:a.map((function(e,a){return(0,b.jsx)(u.Breadcrumb.Item,{onClick:function(){if(e.side&&e.path){var a=t.flatSide.get(e.path);if(a){if(!C(e,i,{location:r}))return;var o=n.flat.find((function(e){return e.path===a}));if(o&&o.children&&o.children.length>0){var u=o.children.find((function(e){return e.redirect}));i(u&&u.redirect||a,{replace:!0})}else i(a,{replace:!0})}}else if(e.path){var l;if(e&&null!=e&&e.children&&(null==e||null==(l=e.children)?void 0:l.length)>0){var c=e.children[0].path;c&&i(c,{replace:!0})}}},children:e.name},a)}))})},F=function(e){return(0,b.jsx)("div",{style:{padding:14,overflowY:"auto",height:"100%"},children:e.children})},I=function(e){var n=e.sideItemIndex,t=(0,d.useLocation)(),i=(0,d.useNavigate)();if(n&&n.index&&n.path&&"*"!==n.path&&"/"!==n.path){if(n.navigate)if(!C(n,i,{location:t}))return(0,b.jsx)(o.Fragment,{});return(0,b.jsx)(o.Fragment,{children:(0,b.jsx)(d.Navigate,{to:n.path,replace:!0})})}return(0,b.jsx)(o.Fragment,{children:e.children})},N=function(e){var n=e.type,t=e.style,i=e.iconSTyle,r=e.color,a=e.className,o=e.onClick,l=[a,"uiw-admin-icons"].filter(Boolean).join(" ").trim();return(0,b.jsx)("div",{style:{display:"inline-flex",alignItems:"center"},children:(0,b.jsx)("div",{className:l,style:t,onClick:function(){return null==o?void 0:o()},children:n&&(0,b.jsx)(u.Icon,{type:n,color:r,style:i})})})},Z=o.createContext({headerLayout:"top",headerBackground:"#fff",headerFontColor:"#000"}),R=function(){return o.useContext(Z)},E=function(e){var n=e.routeData,t=void 0===n?[]:n,i=(0,d.useLocation)(),r=function(e){var n=new Map([]),t=new Map([]),i=new Map([]);return function e(r,a){r.forEach((function(r){var o=r.path,u=r.side,l=r.children;Array.isArray(l)&&e(l,u?o:a),u&&o&&l&&n.set(o,l),o&&(u?t.set(o,o):a&&t.set(o,a),i.set(o,a||"/"))}))}(e),{sideMenus:n,flat:t,flatSide:i}}(t),a=function(e,n){var t=e.find((function(e){return e.path===n}));return t||(e.find((function(e){return e.path&&"*"!==e.path&&(0,h.LX)({path:e.path},n)}))||void 0)}(x(t),i.pathname),u=null==a?void 0:a.hiddenMainMenu,l=o.useMemo((function(){var e=r.flat.get((null==a?void 0:a.path)||"");return e&&"/"!==e?{routeData:r.sideMenus.get(e)||[],parentPath:e}:{routeData:t,parentPath:e}}),[a,t,r]);return{sideItemIndex:o.useMemo((function(){if(a&&a.side){var e=l.routeData.find((function(e){return e.index}));if(e)return e}}),[i.pathname,a]),ChildMenus:l,sideMenusMap:r,hiddenMainMenu:u}};function A(){var e=document;return e.mozFullScreen||e.webkitIsFullScreen||e.webkitFullScreen||e.msFullScreen}var B=function(){if(!function(){var e=document;return e.fullscreenEnabled||e.mozFullScreenEnabled||e.webkitFullscreenEnabled||e.msFullscreenEnabled}())return null;var e=(0,o.useState)(!1),n=(0,i.Z)(e,2),t=n[0],r=n[1];if(t){var a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen&&a.msRequestFullscreen()}else if(A()){var u=document;u.exitFullscreen?u.exitFullscreen():u.webkitCancelFullScreen?u.webkitCancelFullScreen():u.mozCancelFullScreen?u.mozCancelFullScreen():u.msExitFullscreen&&u.msExitFullscreen()}var l=R().headerFontColor,c=function(){!A()&&t&&r(!1)};return(0,o.useEffect)((function(){return window.addEventListener("resize",c),function(){window.removeEventListener("resize",c,!1)}})),(0,o.useMemo)((function(){return(0,b.jsx)(N,{type:t?"shrink":"arrows-alt",iconSTyle:{fontSize:18},color:l,onClick:function(){return r(!t)},style:{marginRight:10}})}),[t])},P=t(8079),T=["title","icon","onClick","divider","render"];function z(e){var n=e.menus,t=void 0===n?[]:n,i=e.profile,l=void 0===i?{}:i,c=e.onReloadAuth,s=e.layouts,h=e.hideReloadButton,f=e.hideLogoutButton,p=e.hideUserInfo,m=e.onLogout,v=s||{},g=v.headerRightvisible,x=v.updateStore,y=(0,d.useNavigate)(),j=[].concat((0,P.Z)(p?[]:[{title:(0,b.jsxs)("span",{style:{fontSize:15},children:["\u8d26\u53f7 ",(null==l?void 0:l.userName)||"admin"]}),icon:(0,b.jsx)(u.Icon,{type:"user"})},{divider:!0}]),(0,P.Z)(t),[{title:"\u5237\u65b0\u6743\u9650",icon:(0,b.jsx)(u.Icon,{type:"reload"}),onClick:function(){return c()},style:{display:h?"none":""}},{title:"\u9000\u51fa\u767b\u5f55",icon:(0,b.jsx)(u.Icon,{type:"logout"}),style:{display:f?"none":""},onClick:function(){m?m(y):(y("/login",{replace:!0}),sessionStorage.removeItem("token"),sessionStorage.removeItem("auth"),localStorage.removeItem("token"),localStorage.removeItem("auth"))}}]),M=(0,b.jsx)("div",{style:{width:150},children:(0,b.jsx)(u.Menu,{children:j.map((function(e,n){var t=e.title,i=e.icon,l=e.onClick,c=e.divider,s=e.render,d=(0,a.Z)(e,T);return c?(0,b.jsx)(u.Menu.Divider,{},n):s?(0,b.jsx)(o.Fragment,{children:s},n):(0,b.jsx)(u.Menu.Item,(0,r.Z)({text:t,icon:i},d,{onClick:l&&l}),n)}))})}),S=(0,o.useMemo)((function(){var e=null==l?void 0:l.avatar,n=null==l?void 0:l.userName,t=n?n.trim().split("")[0]:"";return e?(0,b.jsx)("img",{src:e,alt:t}):n?(0,b.jsx)("div",{className:"avatar",children:t}):(0,b.jsx)("div",{style:{display:"inline-flex",alignItems:"center"},children:(0,b.jsx)(N,{type:"user",iconSTyle:{fontSize:18}})})}),[null==l?void 0:l.avatar,null==l?void 0:l.userName]);return(0,b.jsx)("div",{className:"uiw-global-header-menu",children:(0,b.jsx)(u.Popover,{isOpen:!!g,onVisibleChange:function(e){return null==x?void 0:x({headerRightvisible:e})},trigger:"click",placement:"bottomRight",content:M,children:S})})}var D=t(8258),q=function(e){void 0===e&&(e={});var n=R(),t=n.headerFontColor,i=n.headerLayout,a=(0,o.useMemo)((function(){return e.logo&&(0,b.jsx)("img",{src:e.logo,alt:e.projectName||"logo"})}),[e.logo]),u=(0,o.useMemo)((function(){return e.projectName&&(0,b.jsx)("div",{style:"top"===i?{color:t}:{},children:e.projectName})}),[e.projectName,t]),l=(0,o.useMemo)((function(){var n=e.onLogoClick;return n&&"function"===typeof n?{onClick:function(e){n(e),e.stopPropagation(),e.preventDefault()}}:{}}),[e.onLogoClick]);return(0,o.useMemo)((function(){return(0,b.jsx)("div",{className:"default"===i?"uiw-admin-global-title":"uiw-admin-global-title-top",children:(0,b.jsxs)(D.Link,(0,r.Z)({to:"/"},l,{style:e.collapsed?{justifyContent:"center"}:{},children:[a,!e.collapsed&&u]}))})}),[e.collapsed])},O=function(){var e=(0,o.useState)({headerRightvisible:!1}),n=(0,i.Z)(e,2),t=n[0],a=n[1],u=function(e){a((0,r.Z)({},t,e))};return(0,r.Z)({closeMenu:function(){return u({headerRightvisible:!1})},updateStore:u},t)},U=["className","routes","projectName","profile","menus","onReloadAuth","layouts","headerLayout","headerBackground","headerFontColor","isDefaultContentStyle","hideReloadButton","hideLogoutButton","hideUserInfo","onLogoClick"],X=u.Layout.Header,V=u.Layout.Sider,Y=u.Layout.Content;var _=function(e){var n=e||{},t=n.className,l=n.routes,d=void 0===l?[]:l,h=n.projectName,f=void 0===h?"UIW Admin":h,p=n.profile,m=void 0===p?{}:p,v=n.menus,g=void 0===v?[]:v,x=n.onReloadAuth,j=n.layouts,M=n.headerLayout,S=void 0===M?"default":M,C=n.headerBackground,k=void 0===C?"#fff":C,R=n.headerFontColor,A=void 0===R?"#000":R,P=n.isDefaultContentStyle,T=void 0===P||P,D=n.hideReloadButton,O=n.hideLogoutButton,_=n.hideUserInfo,H=n.onLogoClick,J=(0,a.Z)(n,U),K=e.menuHide,W=(0,o.useState)(!1),G=(0,i.Z)(W,2),Q=G[0],$=G[1],ee=E({routeData:d}),ne=ee.sideItemIndex,te=ee.ChildMenus,ie=ee.sideMenusMap;K=ee.hiddenMainMenu;var re=o.useMemo((function(){return(0,b.jsx)(w,{collapsed:Q,routes:te.routeData,allRoutes:d})}),[te,Q]),ae=o.useMemo((function(){return new y(d)}),[d]),oe=(0,o.useMemo)((function(){return(0,b.jsxs)("div",{style:{display:"flex",justifyItems:"center",alignItems:"center"},children:[null==m?void 0:m.menuLeft,(0,b.jsx)(B,{}),(0,b.jsx)(z,{onReloadAuth:x,profile:m,menus:g,layouts:j,hideReloadButton:D,hideLogoutButton:O,hideUserInfo:_})]})}),[m,g,JSON.stringify(j)]),ue=[t,"uiw-admin-global-header"].filter(Boolean).join(" ").trim(),le=(0,b.jsxs)(X,(0,r.Z)({},J,{className:ue,style:(0,r.Z)({background:k,color:A},e.style),children:[(0,b.jsxs)("div",{style:{display:"flex"},children:["top"===S&&(0,b.jsx)("div",{children:(0,b.jsx)(q,{onLogoClick:H,collapsed:!1,projectName:f,logo:e.logo})}),!K&&(0,b.jsxs)("div",{className:"uiw-admin-nav",children:[(0,b.jsx)(N,{type:Q?"menu-unfold":"menu-fold",iconSTyle:{fontSize:18},color:A,onClick:function(){return $(!Q)},style:{marginRight:10}}),(0,b.jsx)(L,{sideMenusMap:ie,routeMap:ae})]})]}),oe]}));return(0,b.jsx)(o.Fragment,{children:(0,b.jsxs)(Z.Provider,{value:{headerLayout:S,headerBackground:k,headerFontColor:A},children:[(0,b.jsx)(s.Z,{title:f||""}),(0,b.jsxs)(u.Layout,{style:{height:"100%"},children:["top"===S&&le,(0,b.jsxs)(u.Layout,{children:[!K&&(0,b.jsxs)(V,{collapsed:Q,className:c()("uiw-admin-global-sider-menu",{}),width:220,children:["default"===S?(0,b.jsx)(q,{onLogoClick:H,collapsed:Q,projectName:f,logo:e.logo}):(0,b.jsx)("div",{style:{marginTop:10}}),re]}),(0,b.jsxs)(u.Layout,{children:["default"===S&&le,T?(0,b.jsx)(Y,{className:"uiw-admin-global-content",children:(0,b.jsx)(I,{sideItemIndex:ne,children:(0,b.jsx)(F,{children:e.children})})}):(0,b.jsx)(I,{sideItemIndex:ne,children:e.children})]})]})]})]})})}},5553:function(e,n,t){var i=t(7896),r=t(6976),a=t(4218);n.Z=function(e){return(0,r.useEffect)((function(){document.title=e.title||""}),[e.title]),(0,a.jsx)(r.Fragment,{children:r.Children.toArray(e.children).map((function(e){return r.isValidElement(e)?r.cloneElement(e,(0,i.Z)({},e.props||{})):null}))})}},640:function(e,n,t){t.r(n),t.d(n,{default:function(){return f}});var i=t(8079),r=t(6234),a=t(9651),o=t(6976),u=t(8438),l=t(6416),c=t(6032),s=function(e,n){return e.find((function(e){return"/"===n.pathname&&e.index&&e.redirect?e.index:!!(n&&n.pathname&&e.path&&"/"!==n.pathname)&&n.pathname===e.path}))},d=function(e,n){return e.find((function(e){return"/"===n.pathname&&e.index&&e.redirect?e.index:!!(n&&n.pathname&&e.path&&"/"!==n.pathname)&&(0,c.LX)({path:e.path},n.pathname)}))},h=t(4218),f=function(e){var n=e.routes,t=(0,l.useLocation)(),f=(0,l.useNavigate)(),p=o.useState([]),m=(0,r.Z)(p,2),v=m[0],g=m[1],x=function(e,n){var t=s(e,n);if(t)return{current:t,isMatch:!1};var i=d(e,n);return{current:i,isMatch:!!i}}(o.useMemo((function(){return function(e){void 0===e&&(e=[]);var n=[];return function e(t){t.forEach((function(t){t.children?e(t.children):n.push(t)}))}(e),n}(n)}),[n]),t);o.useEffect((function(){if(x.current&&x.current.redirect)f(x.current.redirect);else{var e=function(e,n,t){return t?d(e,n):s(e,n)}(v,t,x.isMatch);e?e&&x.isMatch&&(e.location.pathname!==t.pathname||e.location.search!==t.search)&&g((function(n){return n.map((function(n){return e.location.pathname===n.location.pathname?(0,a.Z)({},n,{location:t}):n}))})):g((function(e){return e.concat([(0,a.Z)({},x.current,{isMatch:x.isMatch,location:t})]).filter((function(e){return!!e}))}))}}),[t.pathname]),o.useMemo((function(){var e=(0,i.Z)(v).map((function(e){return e.location.pathname===t.pathname&&t.search!==e.location.search&&(e.location=t),e}));g((function(){return(0,i.Z)(e)}))}),[t.search]);return(0,h.jsxs)("div",{className:"uiw-layout-tabs-warp",children:[(0,h.jsx)(u.Tabs,{className:"uiw-tabs-warp",type:"card",activeKey:t.pathname,onTabClick:function(e){var n=v.find((function(n){return n.location.pathname===e}));n&&t.pathname!==e&&f(""+e+n.location.search,{state:n.location.state,replace:!0})},children:v.map((function(e,n){return(0,h.jsx)(u.Tabs.Pane,{label:(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.name,v.length>1?(0,h.jsx)(u.Icon,{type:"close",tagName:"span",style:{marginLeft:10},onClick:function(i){return function(e,n,i){e.stopPropagation(),e.preventDefault();var r=v.length-1,a=(0,c.LX)({path:i.path},t.pathname);if(a){var o,u=!1;r>n&&a?(o=v.find((function(e,t){return t===n+1})),u=!0):r===n&&n>0&&a?(o=v.find((function(e,t){return t===n-1})),u=!0):a&&(u=!0),u&&g((function(e){return e.filter((function(e,t){return t!==n}))})),o&&f(""+o.path+o.location.search,{state:o.location.state,replace:!0})}else g((function(e){return e.filter((function(e,t){return t!==n}))}))}(i,n,e)}}):(0,h.jsx)(o.Fragment,{})]})},e.location.pathname)}))}),(0,h.jsx)("div",{className:"uiw-layout-tabs-body",children:(0,h.jsx)(l.Outlet,{})})]})}}}]);
//# sourceMappingURL=829.b715ded0.chunk.js.map